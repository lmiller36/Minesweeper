(this.webpackJsonpwebsite=this.webpackJsonpwebsite||[]).push([[0],{36:function(e,n,t){e.exports=t(52)},47:function(e,n,t){},48:function(e,n,t){},49:function(e,n,t){},52:function(e,n,t){"use strict";t.r(n);var a=t(0),i=t.n(a),r=t(13),o=t.n(r),c=t(17),s=t(25),u=t(5),l=t(6),m=t(26),d=t.n(m),p=t(27),g=t.n(p),f=t(28),b=t(29),v=t(1),h=function(e){return{type:"TOGGLE_GAME_MODE",payload:{now:e}}},E=function(e){return{type:"START_GAME",payload:{difficulty:e}}},O=function(e){return{type:"SWITCH_PAGES",payload:{PAGE:e}}},y={rows:9,cols:9,numBombs:10,key:"EASY"},w={rows:16,cols:16,numBombs:40,key:"MEDIUM"},M={rows:30,cols:16,numBombs:99,key:"HARD"},k={EASY:y,MEDIUM:w,HARD:M},_=["MAIN_MENU","SETUP_NEW_GAME","IN_GAME_FIRST_CLICK","IN_GAME"],P={gameProps:{difficulty:y,isPaused:!1,game:{board:[]},timeElapsed:0,isSet:!1},pages:{}},j={data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,n=arguments.length>1?arguments[1]:void 0,t=n.type,a=n.payload;switch(t){case"PAGE_LOADED_SETUP":return _.forEach((function(n){e.pages[n]=!1})),e.pages.MAIN_MENU=!0,Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{gameMode:"clicking",isPaused:!1})});case"INITIALIZE_BOARD":var i=a.game;return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{game:i,isSet:!0,update:0,shouldRerender:0,gameMode:"clicking",isPaused:!1})});case"UPDATE_BOARD":return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{shouldRerender:e.gameProps.shouldRerender+1})});case"UPDATE_TIMER":var r=a.timeElapsed;return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{timeElapsed:r})});case"TOGGLE_PAUSE_GAME":return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{isPaused:!e.gameProps.isPaused})});case"REMOVE_CACHED_BOARD":return Object(v.a)(Object(v.a)({},e),{},{gameProps:{isSet:!1,game:{board:[]},isPaused:!1,timeElapsed:0}});case"TOGGLE_GAME_MODE":var o="clicking"===e.gameProps.gameMode?"flagging":"clicking";return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{gameMode:o})});case"START_GAME":var c=a.difficulty;return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{difficulty:c,isPaused:!1,timeElapsed:0,shouldRerender:0,gameMode:"clicking"})});case"SWITCH_PAGES":var s=a.PAGE;return _.forEach((function(n){e.pages[n]=n===s})),Object(v.a)({},e);case"END_GAME":var u=a.didWin;return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{win:u,loss:!u})});default:return e}}},A={key:"root",storage:d.a,stateReconciler:g.a},x=Object(l.combineReducers)(j),G=Object(c.a)(A,x),T=t(14),N=t(15),I=t(35),C=t(34),B=t(3),S=(t(47),t(4));function R(){var e=Object(B.a)(["\n"]);return R=function(){return e},e}function D(){var e=Object(B.a)(["\n    width:100%;\n    background:lightgray;\n    text-align:center;\n    font-style: italic;\n"]);return D=function(){return e},e}var F=S.a.div(D()),U=S.a.p(R()),L=function(){return i.a.createElement(F,null,i.a.createElement(U,{className:"titleFont",style:{fontFamily:"Pacifico",fontSize:"xxx-large",margin:"0px 0px 10px"}},"Lorne's Minesweeper"))},W=function(e){return e.data.gameProps.timeElapsed},H=function(e){return e.data.gameProps.isPaused},z=function(e){return e.data.gameProps.game.board},K=function(e){return e.data.gameProps.shouldRerender},V=function(e){return e.data.gameProps.game},Y=function(e){return e.data.gameProps.isSet},q=function(e){return e.data.gameProps.gameMode},J=function(e){return e.data.gameProps.difficulty},Z=function(e,n){return e.data.pages[n]},Q=function(e){return e.data.gameProps.game.board.length>0},X=function(e){return e.data.gameProps.game.didWin&&e.data.gameProps.game.gameOver},$=function(e){return!e.data.gameProps.game.didWin&&e.data.gameProps.game.gameOver},ee=function(e){return e.data.gameProps.game.gameOver};t(48);function ne(){var e=Object(B.a)(["\n    "]);return ne=function(){return e},e}function te(){var e=Object(B.a)(["\n        display:",";\n    "]);return te=function(){return e},e}var ae=Object(u.b)((function(e){return{continuePreviousGame:Q(e)&&!ee(e),inMainMenu:Z(e,"MAIN_MENU"),inSetupMode:Z(e,"SETUP_NEW_GAME")}}),(function(e){return{setupNewGame:function(){return e(O("SETUP_NEW_GAME"))},continueGame:function(){return e(O("IN_GAME"))}}}))((function(e){var n=e.continuePreviousGame,t=e.inSetupMode,a=e.setupNewGame,r=e.inMainMenu,o=e.continueGame,c=S.a.div(te(),t?"none":"inline-grid"),s=S.a.div(ne());return i.a.createElement("div",{style:{display:r?"":"none",marginTop:"20px"}},i.a.createElement(c,null,i.a.createElement(s,{className:"button",style:{display:"".concat(n?"":"none")},onClick:function(){o()}},i.a.createElement("span",null,"Continue Game ")),i.a.createElement(s,{className:"button",onClick:function(){a()}},i.a.createElement("span",null,"New Game ")),i.a.createElement(s,{className:"button"},i.a.createElement("span",null,"Settings")," "),i.a.createElement(s,{className:"button"},i.a.createElement("span",null,"How To Play ")," ")))})),ie=t(33);t(49);function re(){var e=Object(B.a)(["\n        display: ",";\n    "]);return re=function(){return e},e}var oe=Object(u.b)((function(e){return{inSetupMode:Z(e,"SETUP_NEW_GAME")}}),(function(e){return{localRemoveCachedBoard:function(){return e({type:"REMOVE_CACHED_BOARD",payload:{}})},startGame:function(n){return e(E(n))},switchToGame:function(){return e(O("IN_GAME_FIRST_CLICK"))}}}))((function(e){var n=e.localRemoveCachedBoard,t=e.startGame,a=e.inSetupMode,r=e.switchToGame,o=S.a.div(re(),a?"inline-grid":"none");return i.a.createElement(o,{style:{marginTop:20}},Object.keys(k).map((function(e){var n,t=k[e],a="".concat((n=e,"string"!==typeof n?"":n.charAt(0).toUpperCase()+n.slice(1).toLowerCase())," (").concat(t.rows," x ").concat(t.cols,", ").concat(t.numBombs," mines)");return i.a.createElement("label",{className:"container"},a,i.a.createElement("input",{type:"radio",id:e,name:"gameDifficulty",value:e}),i.a.createElement("span",{className:"checkmark"}))})),i.a.createElement("div",{id:"testbutton",onClick:function(){!function(){var e,a,i=document.querySelectorAll("input[name='gameDifficulty']"),o=Object(ie.a)(i);try{for(o.s();!(a=o.n()).done;){var c=a.value;if(c.checked){e=c.value;break}}}catch(u){o.e(u)}finally{o.f()}var s=null;e===y.key?s=y:e===w.key?s=w:e===M.key&&(s=M),console.log(s),s&&(n(),t(s),r())}()}}))})),ce=t(7),se=t(8);function ue(){var e=Object(B.a)([""]);return ue=function(){return e},e}var le=S.a.div(ue()),me=!1,de=Object(u.b)((function(e){return{timeElapsed:W(e),isPaused:H(e),inGame:Z(e,"IN_GAME"),inGameFirstClick:Z(e,"IN_GAME_FIRST_CLICK"),gameOver:ee(e)}}),(function(e){return{updateTimer:function(n){return e(function(e){return{type:"UPDATE_TIMER",payload:{timeElapsed:e}}}(n))}}}))((function(e){var n=e.timeElapsed,t=e.isPaused,a=e.updateTimer,r=e.inGame,o=e.inGameFirstClick;if(e.gameOver)return i.a.createElement("div",null,n);return r&&!t?setTimeout((function(){!r||t||me||a(n+1)}),1e3):o&&a(0),t?!me&&t&&(me=!0):me=!1,i.a.createElement(le,null,n)}));function pe(){var e=Object(B.a)(["\n    display:flex;\n    margin:15px;\n    justify-content: space-around;\n"]);return pe=function(){return e},e}var ge=S.a.div(pe()),fe=Object(u.b)((function(e){return{game:V(e),gameMode:q(e),gameDifficulty:J(e),remainingBombs:0,isPaused:H(e),inGame:Z(e,"IN_GAME"),gameOver:ee(e)}}),(function(e){return{mainMenu:function(){return e(O("MAIN_MENU"))},startGame:function(n){return e(E(n))},inGameFirstClick:function(){return e(O("IN_GAME_FIRST_CLICK"))},toggleGameMode:function(){return e(h())},localRemoveCachedBoard:function(){return e({type:"REMOVE_CACHED_BOARD",payload:{}})},toggledPause:function(){return e({type:"TOGGLE_PAUSE_GAME",payload:{}})}}}))((function(e){var n=e.gameMode,t=e.isPaused,a=e.gameDifficulty,r=e.toggleGameMode,o=e.inGameFirstClick,c=e.localRemoveCachedBoard,s=e.startGame,u=e.mainMenu,l=e.remainingBombs,m=e.toggledPause,d=e.inGame,p=e.gameOver;return i.a.createElement(ge,null,i.a.createElement(se.a,{size:"2x",icon:ce.b,onClick:function(){u()}}),i.a.createElement(de,null),i.a.createElement("div",null,l),i.a.createElement(se.a,{size:"2x",style:{display:"".concat(p?"none":"")},icon:"flagging"===n?ce.a:ce.c,onClick:function(){r()}}),i.a.createElement(se.a,{style:{display:"".concat(d&&!p?"":"none")},size:"2x",icon:t?ce.e:ce.d,onClick:m}),i.a.createElement(se.a,{size:"2x",icon:ce.f,onClick:function(){c(),o(),s(a)}}))})),be=["https://upload.wikimedia.org/wikipedia/commons/thumb/8/80/Minesweeper_0.svg/2000px-Minesweeper_0.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/Minesweeper_1.svg/2000px-Minesweeper_1.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Minesweeper_2.svg/2000px-Minesweeper_2.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/0/08/Minesweeper_3.svg/2000px-Minesweeper_3.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/4/4f/Minesweeper_4.svg/2000px-Minesweeper_4.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Minesweeper_5.svg/2000px-Minesweeper_5.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/c/cc/Minesweeper_6.svg/2000px-Minesweeper_6.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/5/56/Minesweeper_7.svg/2000px-Minesweeper_7.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Minesweeper_8.svg/2000px-Minesweeper_8.svg.png"];function ve(){var e=Object(B.a)(["\ncontent: url(",");\n    width: 50px;\n    height: 50px;\n"]);return ve=function(){return e},e}var he=function(){this.url="https://apprecs.org/ios/images/app-icons/256/e7/451931111.jpg"},Ee=function(e){this.url=be[e]},Oe=function(){this.url="https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Minesweeper_flag.svg/2000px-Minesweeper_flag.svg.png"},ye=function(){this.url="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c7/Minesweeper_unopened_square.svg/1024px-Minesweeper_unopened_square.svg.png"};var we=new function(){this.createImage=function(e){return(e.isOpened&&"bomb"===e.type?new he:e.isOpened?new Ee(e.numBombs):e.isFlagged?new Oe:new ye).url}},Me=S.a.div(ve(),(function(e){return we.createImage(e.tile)}));function ke(){var e=Object(B.a)(["\n    position:relative;\n    width: 50px;\n    height: 50px;\n"]);return ke=function(){return e},e}var _e=S.a.div(ke()),Pe=function(e){var n=e.tile,t=e.gameMode,a=e.click;return i.a.createElement(_e,{onClick:function(){a(n)}},i.a.createElement(Me,{style:{position:"absolute"},tile:n}),i.a.createElement(se.a,{size:"2x",style:{display:"".concat("flagging"!==t||n.isOpened||n.isFlagged?"none":""),zIndex:"20",position:"absolute",left:"10",top:"10",opacity:".3"},icon:ce.a}))},je=t(20),Ae={type:"bomb"},xe={type:"safe"};function Ge(e){return"bomb"===e.type}function Te(e,n,t){for(var a=[],i=0;i<e;i++)a.push(Object(v.a)(Object(v.a)({},t),{},{index:i}));return a}var Ne=function(){function e(n,t){Object(T.a)(this,e);var a=n.rows,i=n.cols,r=n.numBombs;this.rows=a,this.cols=i,this.bombs=r,this.nonBombs=a*i-r,this.remaining=a*i-r,this.opened=new Set,this.gameOver=!1,this.didWin=!1,0===this.bombs?this.board=Te(a*i):(this.board=this.createBoard(n,t),this.clickTile(this.board[t]))}return Object(N.a)(e,[{key:"createBoard",value:function(e,n){var t,a=this,i=e.rows,r=e.cols,o=e.numBombs,c=this.indexToPos(n,r),s=i*r,u=function(e){for(var n=[],t=0;t<e;t++)n.push(Ae);return n}(o),l=9;this.isCorner(c,i,r)?l=4:this.isOnAnEdge(c,i,r)&&(l=6);var m=Te(s-l-o,xe),d=function(e){for(var n=e.length-1;n>0;n--){var t=Math.floor(Math.random()*(n+1)),a=[e[t],e[n]];e[n]=a[0],e[t]=a[1]}return e}(u.concat(m)),p=Object(je.a)(Array(i)).map((function(){return Array(r).fill(0)}));this.iterateOverNeighbors(c,(function(e){p[e.y][e.x]=xe}));var g=0;return this.iterateOverRowsCols((function(e,n){p[e][n]||(p[e][n]=d[g],g++),p[e][n]=Object(v.a)(Object(v.a)({},p[e][n]),{},{index:a.posToArrIndex({x:n,y:e},r),numBombs:0})})),this.calculateBombNumberForEachTile(p,i,r),(t=[]).concat.apply(t,Object(je.a)(p))}},{key:"iterateOverNeighbors",value:function(e,n){for(var t=-1;t<=1;t++)for(var a=-1;a<=1;a++){var i={x:e.x+t,y:e.y+a};i.x<0||i.x>=this.cols||(i.y<0||i.y>=this.rows||n(i))}}},{key:"iterateOverRowsCols",value:function(e){for(var n=0;n<this.rows;n++)for(var t=0;t<this.cols;t++)e(n,t)}},{key:"calculateBombNumberForEachTile",value:function(e,n,t){var a=this;this.iterateOverRowsCols((function(n,t){if(Ge(e[n][t])){var i={x:t,y:n};a.iterateOverNeighbors(i,(function(n){e[n.y][n.x].numBombs+=1}))}}))}},{key:"posToArrIndex",value:function(e,n){return e.y*n+e.x}},{key:"isCorner",value:function(e,n,t){return 2===this.numEdgesOfPos(e,n,t)}},{key:"numEdgesOfPos",value:function(e,n,t){var a=0===e.y,i=e.y===t-1,r=0===e.x,o=e.x===n-1,c=0;return(a||i)&&c++,(r||o)&&c++,c}},{key:"isOnAnEdge",value:function(e,n,t){return this.numEdgesOfPos(e,n,t)>0}},{key:"indexToPos",value:function(e,n){var t=Math.trunc(e/n);return{x:e-t*n,y:t}}},{key:"clickTile",value:function(e){this.openNonBombNeighbors(e)}},{key:"flagTile",value:function(e){var n=this.board[e.index],t=n.isFlagged;n.isFlagged=!t}},{key:"indexWithinBounds",value:function(e){return e>=0&&e<this.rows*this.cols}},{key:"isFlagged",value:function(e){return this.board[e].isFlagged}},{key:"neighborsWithFlags",value:function(e){var n=this,t=0;return this.iterateOverNeighbors(this.indexToPos(e.index,this.cols),(function(e){var a=n.posToArrIndex(e,n.cols);n.isFlagged(a)&&t++})),t}},{key:"openNeighbors",value:function(e){var n=this,t=this.neighborsWithFlags(e),a=this.indexToPos(e.index,this.cols);t===e.numBombs&&this.iterateOverNeighbors(a,(function(e){var t=n.posToArrIndex(e,n.cols);if(n.indexWithinBounds(t)){var a=n.board[t];if(n.isFlagged(t))return;if(a.isOpened)return;n.clickTile(a)}}))}},{key:"decrementUsed",value:function(e){this.opened.has(e)||this.remaining--,this.opened.add(e),this.opened.size!==this.nonBombs||this.win()}},{key:"gameOver",value:function(){return this.gameOver}},{key:"win",value:function(){this.gameOver=!0,this.didWin=!0}},{key:"lose",value:function(){this.gameOver=!0}},{key:"openNonBombNeighbors",value:function(e){var n=this;if("bomb"!==e.type){var t=this.indexToPos(e.index,this.cols);e.isOpened||(this.board[e.index].isOpened=!0,this.decrementUsed(e.index),e.numBombs&&e.numBombs>0||this.iterateOverNeighbors(t,(function(e){var t=n.board[n.posToArrIndex(e,n.cols)];Ge(t)||n.openNonBombNeighbors(t)})))}else this.lose()}}]),e}();function Ie(){var e=Object(B.a)(["\n        display: inline-grid;\n        visibility: ",";\n        grid-template-columns: repeat(",",1fr);\n    "]);return Ie=function(){return e},e}var Ce=null,Be=!0,Se=Object(u.b)((function(e){return{board:z(e),isSet:Y(e),game:V(e),rerender:K(e),gameMode:q(e),gameDifficulty:J(e),isPaused:H(e),gameOver:ee(e)}}),(function(e){return{performInitialSetup:function(n){return e({type:"INITIALIZE_BOARD",payload:{game:n}})},firstClick:function(){return e(O("IN_GAME"))},updateBoard:function(){return e({type:"UPDATE_BOARD",payload:{}})},removeCachedBoard:function(){return e({type:"REMOVE_CACHED_BOARD",payload:{}})},toggleGameMode:function(){return e(h())},localRemoveCachedBoard:function(){return e({type:"REMOVE_CACHED_BOARD",payload:{}})},setDifficulty:function(n){return e(E(n))}}}))((function(e){var n=e.board,t=e.game,a=e.isSet,r=e.gameMode,o=e.gameDifficulty,c=e.isPaused,s=e.gameOver,u=e.performInitialSetup,l=e.updateBoard,m=e.firstClick,d=e.toggleGameMode,p=S.a.div(Ie(),c?"hidden":"",o?o.cols:0);Ce=new Ne(Object(v.a)(Object(v.a)({},o),{},{numBombs:0}),null),Be&&a&&(window.addEventListener("keydown",(function(e){if("F"===e.key||"f"===e.key){if(s)return;d()}}),!1),Be=!1);var g=a?n:Ce.board;return i.a.createElement(p,null,g.map((function(e){return i.a.createElement(Pe,{key:e.index,tile:e,gameMode:r,click:function(e){s||(a?function(e){return!(!e||!e.isOpened)}(e)?function(e){t.openNeighbors(e),l()}(e):"flagging"!==r?e.isFlagged||("bomb"!==e.type?function(e){t.clickTile(e),l()}(e):t.lose()):function(e){t.flagTile(e),l()}(e):function(e){var n=new Ne(o,e.index);u(n),m()}(e))}})})))}));function Re(){var e=Object(B.a)(["\n        display:",";\n    "]);return Re=function(){return e},e}function De(){var e=Object(B.a)(["\n        display:",";\n    "]);return De=function(){return e},e}var Fe=Object(u.b)((function(e){return{inGame:Z(e,"IN_GAME")||Z(e,"IN_GAME_FIRST_CLICK"),win:X(e),loss:$(e),gameOver:ee(e)}}),(function(e){return{}}))((function(e){var n=e.inGame,t=e.win,a=e.loss,r=S.a.div(De(),t?"":"none"),o=S.a.div(Re(),a?"":"none");return i.a.createElement("div",{style:{display:n?"inline-block":"none"}},i.a.createElement(fe,null),i.a.createElement(r,null,i.a.createElement("iframe",{title:"winGIF",src:"https://giphy.com/embed/peAFQfg7Ol6IE",width:"480",height:"455",frameBorder:"0",class:"giphy-embed",allowFullScreen:!0}),i.a.createElement("p",{style:{textAlign:"center"}},"You found all the bombs!! (You win)")),i.a.createElement(o,null,i.a.createElement("iframe",{title:"lossGIF",src:"https://giphy.com/embed/oe33xf3B50fsc",width:"480",height:"480",frameBorder:"0",class:"giphy-embed",allowFullScreen:!0}),i.a.createElement("p",{style:{textAlign:"center"}},"You clicked a bomb!")),i.a.createElement(Se,null))}));function Ue(){var e=Object(B.a)(["\n    text-align: center;\n"]);return Ue=function(){return e},e}var Le=S.a.div(Ue()),We=function(e){Object(I.a)(t,e);var n=Object(C.a)(t);function t(){return Object(T.a)(this,t),n.apply(this,arguments)}return Object(N.a)(t,[{key:"componentDidMount",value:function(){this.props.pageLoadedSetup()}},{key:"render",value:function(){return i.a.createElement("div",{className:"App-Wrapper"},i.a.createElement("div",{className:"App"},i.a.createElement(L,null),i.a.createElement(Le,null,i.a.createElement(ae,null),i.a.createElement(oe,null),i.a.createElement(Fe,null))))}}]),t}(i.a.Component),He=Object(u.b)(null,(function(e){return{pageLoadedSetup:function(){return e({type:"PAGE_LOADED_SETUP",payload:{}})}}}))(We),ze=Object(l.createStore)(G,Object(b.composeWithDevTools)(Object(l.applyMiddleware)(f.a))),Ke=Object(c.b)(ze);o.a.render(i.a.createElement(u.a,{store:ze},i.a.createElement(s.PersistGate,{loading:i.a.createElement("div",null,"Loading..."),persistor:Ke},i.a.createElement(He,null))),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.4d42a868.chunk.js.map