(this.webpackJsonpwebsite=this.webpackJsonpwebsite||[]).push([[0],{34:function(e,n,t){e.exports=t(51)},45:function(e,n,t){},46:function(e,n,t){},47:function(e,n,t){},48:function(e,n,t){},51:function(e,n,t){"use strict";t.r(n);var a=t(0),i=t.n(a),r=t(13),o=t.n(r),s=t(15),u=t(23),c=t(5),l=t(6),m=t(24),d=t.n(m),p=t(25),g=t.n(p),f=t(26),b=t(27),v=t(1),h=function(e){return{type:"TOGGLE_GAME_MODE",payload:{now:e}}},E=function(e){return{type:"START_GAME",payload:{difficulty:e}}},y=function(e){return{type:"SWITCH_PAGES",payload:{PAGE:e}}},O={rows:9,cols:9,numBombs:10,key:"EASY"},M={rows:16,cols:16,numBombs:40,key:"MEDIUM"},w={rows:30,cols:16,numBombs:99,key:"HARD"},k={EASY:O,MEDIUM:M,HARD:w},_=["MAIN_MENU","SETUP_NEW_GAME","IN_GAME_FIRST_CLICK","IN_GAME"],P=t(18),x=t(28),A=t(29);var j={type:"bomb"},G={type:"safe"};function T(e){return"bomb"===e.type}function N(e,n,t){for(var a=[],i=0;i<e;i++)a.push(Object(v.a)(Object(v.a)({},t),{},{index:i}));return a}var I=function(){function e(n,t){Object(x.a)(this,e);var a=n.rows,i=n.cols,r=n.numBombs;this.rows=a,this.cols=i,this.bombs=r,this.nonBombs=a*i-r,this.remaining=a*i-r,this.opened=new Set,this.gameOver=!1,this.didWin=!1,0===this.bombs?this.board=N(a*i):(this.board=this.createBoard(n,t),this.clickTile(this.board[t]))}return Object(A.a)(e,[{key:"createBoard",value:function(e,n){var t,a=this,i=e.rows,r=e.cols,o=e.numBombs,s=this.indexToPos(n,r),u=i*r,c=function(e){for(var n=[],t=0;t<e;t++)n.push(j);return n}(o),l=9;this.isCorner(s,i,r)?l=4:this.isOnAnEdge(s,i,r)&&(l=6);var m=N(u-l-o,G),d=function(e){for(var n=e.length-1;n>0;n--){var t=Math.floor(Math.random()*(n+1)),a=[e[t],e[n]];e[n]=a[0],e[t]=a[1]}return e}(c.concat(m)),p=Object(P.a)(Array(i)).map((function(){return Array(r).fill(0)}));this.iterateOverNeighbors(s,(function(e){p[e.y][e.x]=G}));var g=0;return this.iterateOverRowsCols((function(e,n){p[e][n]||(p[e][n]=d[g],g++),p[e][n]=Object(v.a)(Object(v.a)({},p[e][n]),{},{status:0,index:a.posToArrIndex({x:n,y:e},r),numBombs:0})})),this.calculateBombNumberForEachTile(p,i,r),(t=[]).concat.apply(t,Object(P.a)(p))}},{key:"iterateOverNeighbors",value:function(e,n){for(var t=-1;t<=1;t++)for(var a=-1;a<=1;a++){var i={x:e.x+t,y:e.y+a};i.x<0||i.x>=this.cols||(i.y<0||i.y>=this.rows||n(i))}}},{key:"iterateOverRowsCols",value:function(e){for(var n=0;n<this.rows;n++)for(var t=0;t<this.cols;t++)e(n,t)}},{key:"calculateBombNumberForEachTile",value:function(e,n,t){var a=this;this.iterateOverRowsCols((function(n,t){if(T(e[n][t])){var i={x:t,y:n};a.iterateOverNeighbors(i,(function(n){e[n.y][n.x].numBombs+=1}))}}))}},{key:"posToArrIndex",value:function(e,n){return e.y*n+e.x}},{key:"isCorner",value:function(e,n,t){return 2===this.numEdgesOfPos(e,n,t)}},{key:"numEdgesOfPos",value:function(e,n,t){var a=0===e.y,i=e.y===t-1,r=0===e.x,o=e.x===n-1,s=0;return(a||i)&&s++,(r||o)&&s++,s}},{key:"isOnAnEdge",value:function(e,n,t){return this.numEdgesOfPos(e,n,t)>0}},{key:"indexToPos",value:function(e,n){var t=Math.trunc(e/n);return{x:e-t*n,y:t}}},{key:"clickTile",value:function(e){this.updateTileStatus(e.index),this.openNonBombNeighbors(e)}},{key:"flagTile",value:function(e){var n=this.board[e.index],t=n.isFlagged;n.isFlagged=!t,this.updateTileStatus(e.index)}},{key:"indexWithinBounds",value:function(e){return e>=0&&e<this.rows*this.cols}},{key:"isFlagged",value:function(e){return this.board[e].isFlagged}},{key:"neighborsWithFlags",value:function(e){var n=this,t=0;return this.iterateOverNeighbors(this.indexToPos(e.index,this.cols),(function(e){var a=n.posToArrIndex(e,n.cols);n.isFlagged(a)&&t++})),t}},{key:"openNeighbors",value:function(e){var n=this,t=this.neighborsWithFlags(e),a=this.indexToPos(e.index,this.cols);t===e.numBombs&&this.iterateOverNeighbors(a,(function(e){var t=n.posToArrIndex(e,n.cols);if(n.indexWithinBounds(t)){var a=n.board[t];if(n.isFlagged(t))return;if(a.isOpened)return;n.clickTile(a)}}))}},{key:"decrementUsed",value:function(e){this.opened.has(e)||this.remaining--,this.opened.add(e),this.opened.size!==this.nonBombs||this.win()}},{key:"gameOver",value:function(){return this.gameOver}},{key:"win",value:function(){this.gameOver=!0,this.didWin=!0}},{key:"lose",value:function(){this.gameOver=!0}},{key:"updateTileStatus",value:function(e){var n=1;this.board[e].status&&(n=this.board[e].status),this.board[e].status=n+1}},{key:"openNonBombNeighbors",value:function(e){var n=this;if(this.updateTileStatus(e.index),"bomb"!==e.type){var t=this.indexToPos(e.index,this.cols);e.isOpened||(this.board[e.index].isOpened=!0,this.decrementUsed(e.index),e.numBombs&&e.numBombs>0||this.iterateOverNeighbors(t,(function(e){var t=n.board[n.posToArrIndex(e,n.cols)];T(t)||n.openNonBombNeighbors(t)})))}else this.lose()}}]),e}(),C={gameProps:{difficulty:O,isPaused:!1,game:{board:[]},timeElapsed:0,isSet:!1},pages:{}},S={data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,n=arguments.length>1?arguments[1]:void 0,t=n.type,a=n.payload;switch(t){case"PAGE_LOADED_SETUP":return _.forEach((function(n){e.pages[n]=!1})),e.pages.MAIN_MENU=!0,Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{gameMode:"clicking",isPaused:!1})});case"INITIALIZE_BOARD":var i=a.game;return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{game:i,isSet:!0,update:0,shouldRerender:0,gameMode:"clicking",isPaused:!1})});case"UPDATE_BOARD":return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{shouldRerender:e.gameProps.shouldRerender+1})});case"UPDATE_TIMER":var r=a.timeElapsed;return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{timeElapsed:r})});case"TOGGLE_PAUSE_GAME":return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{isPaused:!e.gameProps.isPaused})});case"REMOVE_CACHED_BOARD":return Object(v.a)(Object(v.a)({},e),{},{gameProps:{isSet:!1,game:{board:[]},isPaused:!1,timeElapsed:0}});case"TOGGLE_GAME_MODE":var o="clicking"===e.gameProps.gameMode?"flagging":"clicking";return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{gameMode:o})});case"START_GAME":var s=a.difficulty,u=new I(Object(v.a)(Object(v.a)({},s),{},{numBombs:0}),null);return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{difficulty:s,game:u,isPaused:!1,timeElapsed:0,shouldRerender:0,gameMode:"clicking"})});case"SWITCH_PAGES":var c=a.PAGE;return _.forEach((function(n){e.pages[n]=n===c})),Object(v.a)({},e);case"END_GAME":var l=a.didWin;return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{win:l,loss:!l})});default:return e}}},B={key:"root",storage:d.a,stateReconciler:g.a},D=Object(l.combineReducers)(S),R=Object(s.a)(B,D),F=t(3),U=(t(45),t(4));t(46);function L(){var e=Object(F.a)(["\n"]);return L=function(){return e},e}function W(){var e=Object(F.a)(["\n    width:100%;\n    background:lightgray;\n    text-align:center;\n    font-style: italic;\n"]);return W=function(){return e},e}var H=U.a.div(W()),z=U.a.p(L()),K=Object(c.b)(null,(function(e){return{openMainMenu:function(){return e(y("MAIN_MENU"))}}}))((function(e){var n=e.openMainMenu;return i.a.createElement(H,null,i.a.createElement(z,{onClick:n,style:{fontFamily:"Pacifico",fontSize:"xxx-large",margin:"0px 0px 10px",cursor:"pointer"}},"Lorne's Minesweeper"))})),V=function(e){return e.data.gameProps.timeElapsed},Y=function(e){return e.data.gameProps.isPaused},q=function(e){return e.data.gameProps.game.board},J=function(e){return e.data.gameProps.game},Z=function(e){return e.data.gameProps.isSet},Q=function(e){return e.data.gameProps.gameMode},X=function(e){return e.data.gameProps.difficulty},$=function(e,n){return e.data.pages[n]},ee=function(e){return e.data.gameProps.game.board.length>0},ne=function(e){return e.data.gameProps.game.didWin&&e.data.gameProps.game.gameOver},te=function(e){return!e.data.gameProps.game.didWin&&e.data.gameProps.game.gameOver},ae=function(e){return e.data.gameProps.game.gameOver},ie=function(e,n){return e.data.gameProps.game.board[n.index].status},re=function(e,n){return e.data.gameProps.game.board[n.index]};t(47);function oe(){var e=Object(F.a)(["\n"]);return oe=function(){return e},e}function se(){var e=Object(F.a)(["\n    display:",";\n"]);return se=function(){return e},e}var ue=U.a.div(se(),(function(e){return e.inSetupMode?"none":"inline-grid"})),ce=U.a.div(oe()),le=Object(c.b)((function(e){return{continuePreviousGame:ee(e)&&!ae(e),inMainMenu:$(e,"MAIN_MENU"),inSetupMode:$(e,"SETUP_NEW_GAME")}}),(function(e){return{setupNewGame:function(){return e(y("SETUP_NEW_GAME"))},continueGame:function(){return e(y("IN_GAME"))}}}))((function(e){var n=e.continuePreviousGame,t=e.inSetupMode,a=e.setupNewGame,r=e.inMainMenu,o=e.continueGame;return i.a.createElement("div",{style:{display:r?"":"none",marginTop:"20px"}},i.a.createElement(ue,{inSetupMode:t},i.a.createElement(ce,{className:"button",style:{display:"".concat(n?"":"none")},onClick:function(){o()}},i.a.createElement("span",null,"Continue Game ")),i.a.createElement(ce,{className:"button",onClick:function(){a()}},i.a.createElement("span",null,"New Game ")),i.a.createElement(ce,{className:"button"},i.a.createElement("span",null,"Settings")," "),i.a.createElement(ce,{className:"button"},i.a.createElement("span",null,"How To Play ")," ")))})),me=t(33);t(48);function de(){var e=Object(F.a)(["\n    display: ",";\n"]);return de=function(){return e},e}var pe=U.a.div(de(),(function(e){return e.inSetupMode?"inline-grid":"none"})),ge=Object(c.b)((function(e){return{inSetupMode:$(e,"SETUP_NEW_GAME")}}),(function(e){return{localRemoveCachedBoard:function(){return e({type:"REMOVE_CACHED_BOARD",payload:{}})},startGame:function(n){return e(E(n))},switchToGame:function(){return e(y("IN_GAME_FIRST_CLICK"))}}}))((function(e){var n=e.localRemoveCachedBoard,t=e.startGame,a=e.inSetupMode,r=e.switchToGame;return i.a.createElement(pe,{inSetupMode:a,style:{marginTop:20}},Object.keys(k).map((function(e){var n,t=k[e],a="".concat((n=e,"string"!==typeof n?"":n.charAt(0).toUpperCase()+n.slice(1).toLowerCase())," (").concat(t.rows," x ").concat(t.cols,", ").concat(t.numBombs," mines)");return i.a.createElement("label",{key:e,className:"container"},a,i.a.createElement("input",{type:"radio",id:e,name:"gameDifficulty",value:e}),i.a.createElement("span",{className:"checkmark"}))})),i.a.createElement("div",{id:"testbutton",onClick:function(){!function(){var e,a,i=document.querySelectorAll("input[name='gameDifficulty']"),o=Object(me.a)(i);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(s.checked){e=s.value;break}}}catch(c){o.e(c)}finally{o.f()}var u=null;e===O.key?u=O:e===M.key?u=M:e===w.key&&(u=w),u&&(n(),t(u),r())}()}}))})),fe=t(7),be=t(8);function ve(){var e=Object(F.a)([""]);return ve=function(){return e},e}var he=U.a.div(ve()),Ee=!1,ye=Object(c.b)((function(e){return{timeElapsed:V(e),isPaused:Y(e),inGame:$(e,"IN_GAME"),inGameFirstClick:$(e,"IN_GAME_FIRST_CLICK"),gameOver:ae(e)}}),(function(e){return{updateTimer:function(n){return e(function(e){return{type:"UPDATE_TIMER",payload:{timeElapsed:e}}}(n))}}}))((function(e){var n=e.timeElapsed,t=e.isPaused,a=e.updateTimer,r=e.inGame,o=e.inGameFirstClick;if(e.gameOver)return i.a.createElement("div",null,n);return r&&!t?setTimeout((function(){!r||t||Ee||a(n+1)}),1e3):o&&a(0),t?!Ee&&t&&(Ee=!0):Ee=!1,i.a.createElement(he,null,n)}));function Oe(){var e=Object(F.a)(["\n    display:flex;\n    margin:15px;\n    justify-content: space-around;\n"]);return Oe=function(){return e},e}var Me=U.a.div(Oe()),we=Object(c.b)((function(e){return{game:J(e),gameMode:Q(e),gameDifficulty:X(e),remainingBombs:0,isPaused:Y(e),inGame:$(e,"IN_GAME"),gameOver:ae(e)}}),(function(e){return{mainMenu:function(){return e(y("MAIN_MENU"))},startGame:function(n){return e(E(n))},inGameFirstClick:function(){return e(y("IN_GAME_FIRST_CLICK"))},toggleGameMode:function(){return e(h())},localRemoveCachedBoard:function(){return e({type:"REMOVE_CACHED_BOARD",payload:{}})},toggledPause:function(){return e({type:"TOGGLE_PAUSE_GAME",payload:{}})}}}))((function(e){var n=e.gameMode,t=e.isPaused,a=e.gameDifficulty,r=e.toggleGameMode,o=e.inGameFirstClick,s=e.localRemoveCachedBoard,u=e.startGame,c=e.mainMenu,l=e.remainingBombs,m=e.toggledPause,d=e.inGame,p=e.gameOver;return i.a.createElement(Me,null,i.a.createElement(be.a,{size:"2x",icon:fe.b,onClick:function(){c()}}),i.a.createElement(ye,null),i.a.createElement("div",null,l),i.a.createElement(be.a,{size:"2x",style:{display:"".concat(p?"none":"")},icon:"flagging"===n?fe.a:fe.c,onClick:function(){r()}}),i.a.createElement(be.a,{style:{display:"".concat(d&&!p?"":"none")},size:"2x",icon:t?fe.e:fe.d,onClick:m}),i.a.createElement(be.a,{size:"2x",icon:fe.f,onClick:function(){s(),o(),u(a)}}))})),ke=["https://upload.wikimedia.org/wikipedia/commons/thumb/8/80/Minesweeper_0.svg/2000px-Minesweeper_0.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/Minesweeper_1.svg/2000px-Minesweeper_1.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Minesweeper_2.svg/2000px-Minesweeper_2.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/0/08/Minesweeper_3.svg/2000px-Minesweeper_3.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/4/4f/Minesweeper_4.svg/2000px-Minesweeper_4.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Minesweeper_5.svg/2000px-Minesweeper_5.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/c/cc/Minesweeper_6.svg/2000px-Minesweeper_6.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/5/56/Minesweeper_7.svg/2000px-Minesweeper_7.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Minesweeper_8.svg/2000px-Minesweeper_8.svg.png"];function _e(){var e=Object(F.a)(["\ncontent: url(",");\n    width: 50px;\n    height: 50px;\n"]);return _e=function(){return e},e}var Pe=function(){this.url="https://apprecs.org/ios/images/app-icons/256/e7/451931111.jpg"},xe=function(e){this.url=ke[e]},Ae=function(){this.url="https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Minesweeper_flag.svg/2000px-Minesweeper_flag.svg.png"},je=function(){this.url="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c7/Minesweeper_unopened_square.svg/1024px-Minesweeper_unopened_square.svg.png"};var Ge=new function(){this.createImage=function(e){return(e.isOpened&&"bomb"===e.type?new Pe:e.isOpened?new xe(e.numBombs):e.isFlagged?new Ae:new je).url}},Te=U.a.div(_e(),(function(e){return Ge.createImage(e.tile)}));function Ne(){var e=Object(F.a)(["\n    position:relative;\n    width: 50px;\n    height: 50px;\n"]);return Ne=function(){return e},e}var Ie=U.a.div(Ne()),Ce=Object(c.b)((function(e,n){return{tile:re(e,n),changed:ie(e,n)}}))((function(e){var n=e.tile,t=e.gameMode,a=e.click;e.index,e.changed;return i.a.createElement(Ie,{onClick:function(){a(n)}},i.a.createElement(Te,{style:{position:"absolute"},tile:n}),i.a.createElement(be.a,{size:"2x",style:{display:"".concat("flagging"!==t||n.isOpened||n.isFlagged?"none":""),zIndex:"20",position:"absolute",left:"10",top:"10",opacity:".3"},icon:fe.a}))}));function Se(){var e=Object(F.a)(["\n    display: inline-grid;\n    visibility: ",";\n    grid-template-columns: repeat(",",1fr);\n"]);return Se=function(){return e},e}var Be=!0,De=U.a.div(Se(),(function(e){return e.isPaused?"hidden":""}),(function(e){return e.gameDifficulty?e.gameDifficulty.cols:0})),Re=Object(c.b)((function(e){return{board:q(e),isSet:Z(e),game:J(e),gameMode:Q(e),gameDifficulty:X(e),isPaused:Y(e),gameOver:ae(e)}}),(function(e){return{performInitialSetup:function(n){return e({type:"INITIALIZE_BOARD",payload:{game:n}})},firstClick:function(){return e(y("IN_GAME"))},updateBoard:function(){return e({type:"UPDATE_BOARD",payload:{}})},removeCachedBoard:function(){return e({type:"REMOVE_CACHED_BOARD",payload:{}})},toggleGameMode:function(){return e(h())},localRemoveCachedBoard:function(){return e({type:"REMOVE_CACHED_BOARD",payload:{}})},setDifficulty:function(n){return e(E(n))}}}))((function(e){var n=e.game,t=e.isSet,a=e.gameMode,r=e.gameDifficulty,o=e.isPaused,s=e.gameOver,u=e.performInitialSetup,c=e.updateBoard,l=e.firstClick,m=e.toggleGameMode;Be&&t&&(window.addEventListener("keydown",(function(e){if("F"===e.key||"f"===e.key){if(s)return;m()}}),!1),Be=!1);return i.a.createElement(De,{isPaused:o,gameDifficulty:r},0===n.board.length?i.a.createElement("div",null):n.board.map((function(e){return i.a.createElement(Ce,{key:e.index,index:e.index,gameMode:a,click:function(e){s||(t?function(e){return!(!e||!e.isOpened)}(e)?function(e){n.openNeighbors(e),c()}(e):"flagging"!==a?e.isFlagged||("bomb"!==e.type?function(e){n.clickTile(e),c()}(e):n.lose()):function(e){n.flagTile(e),c()}(e):function(e){var n=new I(r,e.index);u(n),l()}(e))}})})))}));function Fe(){var e=Object(F.a)(["\n    display:",";\n"]);return Fe=function(){return e},e}function Ue(){var e=Object(F.a)(["\n    display:",";\n"]);return Ue=function(){return e},e}var Le=U.a.div(Ue(),(function(e){return e.win?"":"none"})),We=U.a.div(Fe(),(function(e){return e.loss?"":"none"})),He=Object(c.b)((function(e){return{inGame:$(e,"IN_GAME")||$(e,"IN_GAME_FIRST_CLICK"),win:ne(e),loss:te(e),gameOver:ae(e)}}),(function(e){return{}}))((function(e){var n=e.inGame,t=e.win,a=e.loss;return i.a.createElement("div",{style:{display:n?"inline-block":"none"}},i.a.createElement(we,null),i.a.createElement(Le,{win:t},i.a.createElement("iframe",{title:"winGIF",src:"https://giphy.com/embed/peAFQfg7Ol6IE",width:"480",height:"455",frameBorder:"0",className:"giphy-embed",allowFullScreen:!0}),i.a.createElement("p",{style:{textAlign:"center"}},"You found all the bombs!! (You win)")),i.a.createElement(We,{loss:a},i.a.createElement("iframe",{title:"lossGIF",src:"https://giphy.com/embed/oe33xf3B50fsc",width:"480",height:"480",frameBorder:"0",className:"giphy-embed",allowFullScreen:!0}),i.a.createElement("p",{style:{textAlign:"center"}},"You clicked a bomb!")),i.a.createElement(Re,null))}));function ze(){var e=Object(F.a)(["\n    text-align: center;\n"]);return ze=function(){return e},e}var Ke=U.a.div(ze()),Ve=Object(c.b)(null,(function(e){return{pageLoadedSetup:function(){return e({type:"PAGE_LOADED_SETUP",payload:{}})}}}))((function(e){var n=e.pageLoadedSetup;return i.a.createElement("div",{className:"App-Wrapper unselectable",onLoad:n},i.a.createElement("div",{className:"App"},i.a.createElement(K,null),i.a.createElement(Ke,null,i.a.createElement(le,null),i.a.createElement(ge,null),i.a.createElement(He,null))))})),Ye=Object(l.createStore)(R,Object(b.composeWithDevTools)(Object(l.applyMiddleware)(f.a))),qe=Object(s.b)(Ye);o.a.render(i.a.createElement(c.a,{store:Ye},i.a.createElement(u.PersistGate,{loading:i.a.createElement("div",null,"Loading..."),persistor:qe},i.a.createElement(Ve,null))),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.c8a1c2f5.chunk.js.map