(this.webpackJsonpwebsite=this.webpackJsonpwebsite||[]).push([[0],{36:function(e,n,t){e.exports=t(50)},47:function(e,n,t){},50:function(e,n,t){"use strict";t.r(n);var a=t(0),i=t.n(a),r=t(13),o=t.n(r),s=t(17),c=t(25),u=t(5),l=t(6),m=t(26),d=t.n(m),p=t(27),g=t.n(p),f=t(28),b=t(29),v=t(1),h=function(e){return{type:"TOGGLE_GAME_MODE",payload:{now:e}}},E=function(e){return{type:"START_GAME",payload:{difficulty:e}}},O=function(e){return{type:"SWITCH_PAGES",payload:{PAGE:e}}},y={rows:9,cols:9,numBombs:10,key:"EASY"},M={rows:16,cols:16,numBombs:40,key:"MEDIUM"},w={rows:30,cols:16,numBombs:99,key:"HARD"},_={EASY:y,MEDIUM:M,HARD:w},k=["MAIN_MENU","SETUP_NEW_GAME","IN_GAME_FIRST_CLICK","IN_GAME"],P={gameProps:{difficulty:y,isPaused:!1,game:{board:[]},timeElapsed:0,isSet:!1},pages:{}},A={data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,n=arguments.length>1?arguments[1]:void 0,t=n.type,a=n.payload;switch(t){case"PAGE_LOADED_SETUP":return k.forEach((function(n){e.pages[n]=!1})),e.pages.MAIN_MENU=!0,Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{gameMode:"clicking",isPaused:!1})});case"INITIALIZE_BOARD":var i=a.game;return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{game:i,isSet:!0,update:0,shouldRerender:0,gameMode:"clicking",isPaused:!1})});case"UPDATE_BOARD":return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{shouldRerender:e.gameProps.shouldRerender+1})});case"UPDATE_TIMER":var r=a.timeElapsed;return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{timeElapsed:r})});case"TOGGLE_PAUSE_GAME":return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{isPaused:!e.gameProps.isPaused})});case"REMOVE_CACHED_BOARD":return Object(v.a)(Object(v.a)({},e),{},{gameProps:{isSet:!1,game:{board:[]},isPaused:!1,timeElapsed:0}});case"TOGGLE_GAME_MODE":var o="clicking"===e.gameProps.gameMode?"flagging":"clicking";return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{gameMode:o})});case"START_GAME":var s=a.difficulty;return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{difficulty:s,isPaused:!1,timeElapsed:0,shouldRerender:0,gameMode:"clicking"})});case"SWITCH_PAGES":var c=a.PAGE;return k.forEach((function(n){e.pages[n]=n===c})),Object(v.a)({},e);case"END_GAME":var u=a.didWin;return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{win:u,loss:!u})});default:return e}}},j={key:"root",storage:d.a,stateReconciler:g.a},G=Object(l.combineReducers)(A),x=Object(s.a)(j,G),T=t(14),I=t(15),C=t(35),B=t(34),N=(t(47),t(3)),S=t(4);function R(){var e=Object(N.a)(["\n"]);return R=function(){return e},e}function D(){var e=Object(N.a)(["\n\n"]);return D=function(){return e},e}var F=S.a.div(D()),U=S.a.p(R()),L=function(){return i.a.createElement(F,null,i.a.createElement(U,null,"Lorne's Minesweeper"))},W=function(e){return e.data.gameProps.timeElapsed},H=function(e){return e.data.gameProps.isPaused},z=function(e){return e.data.gameProps.game.board},K=function(e){return e.data.gameProps.shouldRerender},V=function(e){return e.data.gameProps.game},Y=function(e){return e.data.gameProps.isSet},q=function(e){return e.data.gameProps.gameMode},J=function(e){return e.data.gameProps.difficulty},Z=function(e,n){return e.data.pages[n]},Q=function(e){return e.data.gameProps.game.board.length>0},X=function(e){return e.data.gameProps.game.didWin&&e.data.gameProps.game.gameOver},$=function(e){return!e.data.gameProps.game.didWin&&e.data.gameProps.game.gameOver},ee=function(e){return e.data.gameProps.game.gameOver};function ne(){var e=Object(N.a)(["\n        display:",";\n    "]);return ne=function(){return e},e}var te=Object(u.b)((function(e){return{continuePreviousGame:Q(e)&&!ee(e),inMainMenu:Z(e,"MAIN_MENU"),inSetupMode:Z(e,"SETUP_NEW_GAME")}}),(function(e){return{setupNewGame:function(){return e(O("SETUP_NEW_GAME"))},continueGame:function(){return e(O("IN_GAME"))}}}))((function(e){var n=e.continuePreviousGame,t=e.inSetupMode,a=e.setupNewGame,r=e.inMainMenu,o=e.continueGame,s=S.a.div(ne(),t?"none":"inline-grid");return i.a.createElement("div",{style:{display:r?"":"none"}},i.a.createElement(s,null,i.a.createElement("button",{style:{display:"".concat(n?"":"none")},onClick:function(){o()}},"Continue Game "),i.a.createElement("button",{onClick:function(){a()}},"New Game"),i.a.createElement("button",null,"Settings "),i.a.createElement("button",null,"How To Play ")))})),ae=t(33);function ie(){var e=Object(N.a)(["\n        display: ",";\n    "]);return ie=function(){return e},e}var re=Object(u.b)((function(e){return{inSetupMode:Z(e,"SETUP_NEW_GAME")}}),(function(e){return{localRemoveCachedBoard:function(){return e({type:"REMOVE_CACHED_BOARD",payload:{}})},startGame:function(n){return e(E(n))},switchToGame:function(){return e(O("IN_GAME_FIRST_CLICK"))}}}))((function(e){var n=e.localRemoveCachedBoard,t=e.startGame,a=e.inSetupMode,r=e.switchToGame,o=S.a.div(ie(),a?"inline-grid":"none");return i.a.createElement(o,null,Object.keys(_).map((function(e){var n,t=_[e],a="".concat((n=e,"string"!==typeof n?"":n.charAt(0).toUpperCase()+n.slice(1).toLowerCase())," (").concat(t.rows," x ").concat(t.cols,", ").concat(t.numBombs," mines)");return i.a.createElement("div",null,i.a.createElement("input",{type:"radio",id:e,name:"gameDifficulty",value:e}),i.a.createElement("label",{htmlFor:e},a))})),i.a.createElement("button",{onClick:function(){!function(){n();var e,a,i=document.querySelectorAll("input[name='gameDifficulty']"),r=Object(ae.a)(i);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(o.checked){e=o.value;break}}}catch(c){r.e(c)}finally{r.f()}var s=y;e===M.key?s=M:e===w.key&&(s=w),t(s)}(),r()}},"Start Game "))})),oe=t(7),se=t(8);function ce(){var e=Object(N.a)([""]);return ce=function(){return e},e}var ue=S.a.div(ce()),le=!1,me=Object(u.b)((function(e){return{timeElapsed:W(e),isPaused:H(e),inGame:Z(e,"IN_GAME"),inGameFirstClick:Z(e,"IN_GAME_FIRST_CLICK"),gameOver:ee(e)}}),(function(e){return{updateTimer:function(n){return e(function(e){return{type:"UPDATE_TIMER",payload:{timeElapsed:e}}}(n))}}}))((function(e){var n=e.timeElapsed,t=e.isPaused,a=e.updateTimer,r=e.inGame,o=e.inGameFirstClick;if(e.gameOver)return i.a.createElement("div",null,n);return r&&!t?setTimeout((function(){!r||t||le||a(n+1)}),1e3):o&&a(0),t?!le&&t&&(le=!0):le=!1,i.a.createElement(ue,null,n)}));function de(){var e=Object(N.a)(["\n    display:flex;\n    margin:15px;\n    justify-content: space-around;\n"]);return de=function(){return e},e}var pe=S.a.div(de()),ge=Object(u.b)((function(e){return{game:V(e),gameMode:q(e),gameDifficulty:J(e),remainingBombs:0,isPaused:H(e),inGame:Z(e,"IN_GAME"),gameOver:ee(e)}}),(function(e){return{mainMenu:function(){return e(O("MAIN_MENU"))},startGame:function(n){return e(E(n))},inGameFirstClick:function(){return e(O("IN_GAME_FIRST_CLICK"))},toggleGameMode:function(){return e(h())},localRemoveCachedBoard:function(){return e({type:"REMOVE_CACHED_BOARD",payload:{}})},toggledPause:function(){return e({type:"TOGGLE_PAUSE_GAME",payload:{}})}}}))((function(e){var n=e.gameMode,t=e.isPaused,a=e.gameDifficulty,r=e.toggleGameMode,o=e.inGameFirstClick,s=e.localRemoveCachedBoard,c=e.startGame,u=e.mainMenu,l=e.remainingBombs,m=e.toggledPause,d=e.inGame,p=e.gameOver;return i.a.createElement(pe,null,i.a.createElement(se.a,{size:"2x",icon:oe.b,onClick:function(){u()}}),i.a.createElement(me,null),i.a.createElement("div",null,l),i.a.createElement(se.a,{size:"2x",style:{display:"".concat(p?"none":"")},icon:"flagging"===n?oe.a:oe.c,onClick:function(){r()}}),i.a.createElement(se.a,{style:{display:"".concat(d&&!p?"":"none")},size:"2x",icon:t?oe.e:oe.d,onClick:m}),i.a.createElement(se.a,{size:"2x",icon:oe.f,onClick:function(){s(),o(),c(a)}}))})),fe=["https://upload.wikimedia.org/wikipedia/commons/thumb/8/80/Minesweeper_0.svg/2000px-Minesweeper_0.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/Minesweeper_1.svg/2000px-Minesweeper_1.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Minesweeper_2.svg/2000px-Minesweeper_2.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/0/08/Minesweeper_3.svg/2000px-Minesweeper_3.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/4/4f/Minesweeper_4.svg/2000px-Minesweeper_4.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Minesweeper_5.svg/2000px-Minesweeper_5.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/c/cc/Minesweeper_6.svg/2000px-Minesweeper_6.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/5/56/Minesweeper_7.svg/2000px-Minesweeper_7.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Minesweeper_8.svg/2000px-Minesweeper_8.svg.png"];function be(){var e=Object(N.a)(["\ncontent: url(",");\n    width: 50px;\n    height: 50px;\n"]);return be=function(){return e},e}var ve=function(){this.url="https://apprecs.org/ios/images/app-icons/256/e7/451931111.jpg"},he=function(e){this.url=fe[e]},Ee=function(){this.url="https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Minesweeper_flag.svg/2000px-Minesweeper_flag.svg.png"},Oe=function(){this.url="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c7/Minesweeper_unopened_square.svg/1024px-Minesweeper_unopened_square.svg.png"};var ye=new function(){this.createImage=function(e){return(e.isOpened&&"bomb"===e.type?new ve:e.isOpened?new he(e.numBombs):e.isFlagged?new Ee:new Oe).url}},Me=S.a.div(be(),(function(e){return ye.createImage(e.tile)}));function we(){var e=Object(N.a)(["\n    position:relative;\n    width: 50px;\n    height: 50px;\n"]);return we=function(){return e},e}var _e=S.a.div(we()),ke=function(e){var n=e.tile,t=e.gameMode,a=e.click;return i.a.createElement(_e,{onClick:function(){a(n)}},i.a.createElement(Me,{style:{position:"absolute"},tile:n}),i.a.createElement(se.a,{size:"2x",style:{display:"".concat("flagging"!==t||n.isOpened||n.isFlagged?"none":""),zIndex:"20",position:"absolute",left:"10",top:"10",opacity:".3"},icon:oe.a}))},Pe=t(20),Ae={type:"bomb"},je={type:"safe"};function Ge(e){return"bomb"===e.type}function xe(e,n,t){for(var a=[],i=0;i<e;i++)a.push(Object(v.a)(Object(v.a)({},t),{},{index:i}));return a}var Te=function(){function e(n,t){Object(T.a)(this,e);var a=n.rows,i=n.cols,r=n.numBombs;this.rows=a,this.cols=i,this.bombs=r,this.nonBombs=a*i-r,this.remaining=a*i-r,this.opened=new Set,this.gameOver=!1,this.didWin=!1,0===this.bombs?this.board=xe(a*i):(this.board=this.createBoard(n,t),this.clickTile(this.board[t]))}return Object(I.a)(e,[{key:"createBoard",value:function(e,n){var t,a=this,i=e.rows,r=e.cols,o=e.numBombs,s=this.indexToPos(n,r),c=i*r,u=function(e){for(var n=[],t=0;t<e;t++)n.push(Ae);return n}(o),l=9;this.isCorner(s,i,r)?l=4:this.isOnAnEdge(s,i,r)&&(l=6);var m=xe(c-l-o,je),d=function(e){for(var n=e.length-1;n>0;n--){var t=Math.floor(Math.random()*(n+1)),a=[e[t],e[n]];e[n]=a[0],e[t]=a[1]}return e}(u.concat(m)),p=Object(Pe.a)(Array(i)).map((function(){return Array(r).fill(0)}));this.iterateOverNeighbors(s,(function(e){p[e.y][e.x]=je}));var g=0;return this.iterateOverRowsCols((function(e,n){p[e][n]||(p[e][n]=d[g],g++),p[e][n]=Object(v.a)(Object(v.a)({},p[e][n]),{},{index:a.posToArrIndex({x:n,y:e},r),numBombs:0})})),this.calculateBombNumberForEachTile(p,i,r),(t=[]).concat.apply(t,Object(Pe.a)(p))}},{key:"iterateOverNeighbors",value:function(e,n){for(var t=-1;t<=1;t++)for(var a=-1;a<=1;a++){var i={x:e.x+t,y:e.y+a};i.x<0||i.x>=this.cols||(i.y<0||i.y>=this.rows||n(i))}}},{key:"iterateOverRowsCols",value:function(e){for(var n=0;n<this.rows;n++)for(var t=0;t<this.cols;t++)e(n,t)}},{key:"calculateBombNumberForEachTile",value:function(e,n,t){var a=this;this.iterateOverRowsCols((function(n,t){if(Ge(e[n][t])){var i={x:t,y:n};a.iterateOverNeighbors(i,(function(n){e[n.y][n.x].numBombs+=1}))}}))}},{key:"posToArrIndex",value:function(e,n){return e.y*n+e.x}},{key:"isCorner",value:function(e,n,t){return 2===this.numEdgesOfPos(e,n,t)}},{key:"numEdgesOfPos",value:function(e,n,t){var a=0===e.y,i=e.y===t-1,r=0===e.x,o=e.x===n-1,s=0;return(a||i)&&s++,(r||o)&&s++,s}},{key:"isOnAnEdge",value:function(e,n,t){return this.numEdgesOfPos(e,n,t)>0}},{key:"indexToPos",value:function(e,n){var t=Math.trunc(e/n);return{x:e-t*n,y:t}}},{key:"clickTile",value:function(e){this.openNonBombNeighbors(e)}},{key:"flagTile",value:function(e){var n=this.board[e.index],t=n.isFlagged;n.isFlagged=!t}},{key:"indexWithinBounds",value:function(e){return e>=0&&e<this.rows*this.cols}},{key:"isFlagged",value:function(e){return this.board[e].isFlagged}},{key:"neighborsWithFlags",value:function(e){var n=this,t=0;return this.iterateOverNeighbors(this.indexToPos(e.index,this.cols),(function(e){var a=n.posToArrIndex(e,n.cols);n.isFlagged(a)&&t++})),t}},{key:"openNeighbors",value:function(e){var n=this,t=this.neighborsWithFlags(e),a=this.indexToPos(e.index,this.cols);t===e.numBombs&&this.iterateOverNeighbors(a,(function(e){var t=n.posToArrIndex(e,n.cols);if(n.indexWithinBounds(t)){var a=n.board[t];if(n.isFlagged(t))return;if(a.isOpened)return;n.clickTile(a)}}))}},{key:"decrementUsed",value:function(e){this.opened.has(e)||this.remaining--,this.opened.add(e),this.opened.size!==this.nonBombs||this.win()}},{key:"gameOver",value:function(){return this.gameOver}},{key:"win",value:function(){this.gameOver=!0,this.didWin=!0}},{key:"lose",value:function(){this.gameOver=!0}},{key:"openNonBombNeighbors",value:function(e){var n=this;if("bomb"!==e.type){var t=this.indexToPos(e.index,this.cols);e.isOpened||(this.board[e.index].isOpened=!0,this.decrementUsed(e.index),e.numBombs&&e.numBombs>0||this.iterateOverNeighbors(t,(function(e){var t=n.board[n.posToArrIndex(e,n.cols)];Ge(t)||n.openNonBombNeighbors(t)})))}else this.lose()}}]),e}();function Ie(){var e=Object(N.a)(["\n        display: inline-grid;\n        visibility: ",";\n        grid-template-columns: repeat(",",1fr);\n    "]);return Ie=function(){return e},e}var Ce=null,Be=!0,Ne=Object(u.b)((function(e){return{board:z(e),isSet:Y(e),game:V(e),rerender:K(e),gameMode:q(e),gameDifficulty:J(e),isPaused:H(e),gameOver:ee(e)}}),(function(e){return{performInitialSetup:function(n){return e({type:"INITIALIZE_BOARD",payload:{game:n}})},firstClick:function(){return e(O("IN_GAME"))},updateBoard:function(){return e({type:"UPDATE_BOARD",payload:{}})},removeCachedBoard:function(){return e({type:"REMOVE_CACHED_BOARD",payload:{}})},toggleGameMode:function(){return e(h())},localRemoveCachedBoard:function(){return e({type:"REMOVE_CACHED_BOARD",payload:{}})},setDifficulty:function(n){return e(E(n))}}}))((function(e){var n=e.board,t=e.game,a=e.isSet,r=e.gameMode,o=e.gameDifficulty,s=e.isPaused,c=e.gameOver,u=e.performInitialSetup,l=e.updateBoard,m=e.firstClick,d=e.toggleGameMode,p=S.a.div(Ie(),s?"hidden":"",o?o.cols:0);Ce=new Te(Object(v.a)(Object(v.a)({},o),{},{numBombs:0}),null),Be&&a&&(window.addEventListener("keydown",(function(e){if("F"===e.key||"f"===e.key){if(c)return;d()}}),!1),Be=!1);var g=a?n:Ce.board;return i.a.createElement(p,null,g.map((function(e){return i.a.createElement(ke,{key:e.index,tile:e,gameMode:r,click:function(e){c||(a?function(e){return!(!e||!e.isOpened)}(e)?function(e){t.openNeighbors(e),l()}(e):"flagging"!==r?e.isFlagged||("bomb"!==e.type?function(e){t.clickTile(e),l()}(e):t.lose()):function(e){t.flagTile(e),l()}(e):function(e){var n=new Te(o,e.index);u(n),m()}(e))}})})))}));function Se(){var e=Object(N.a)(["\n        display:",";\n    "]);return Se=function(){return e},e}function Re(){var e=Object(N.a)(["\n        display:",";\n    "]);return Re=function(){return e},e}var De=Object(u.b)((function(e){return{inGame:Z(e,"IN_GAME")||Z(e,"IN_GAME_FIRST_CLICK"),win:X(e),loss:$(e),gameOver:ee(e)}}),(function(e){return{}}))((function(e){var n=e.inGame,t=e.win,a=e.loss,r=S.a.div(Re(),t?"":"none"),o=S.a.div(Se(),a?"":"none");return i.a.createElement("div",{style:{display:n?"":"none"}},i.a.createElement(ge,null),i.a.createElement(r,null,i.a.createElement("iframe",{title:"winGIF",src:"https://giphy.com/embed/peAFQfg7Ol6IE",width:"480",height:"455",frameBorder:"0",class:"giphy-embed",allowFullScreen:!0}),i.a.createElement("p",{style:{textAlign:"center"}},"You found all the bombs!! (You win)")),i.a.createElement(o,null,i.a.createElement("iframe",{title:"lossGIF",src:"https://giphy.com/embed/oe33xf3B50fsc",width:"480",height:"480",frameBorder:"0",class:"giphy-embed",allowFullScreen:!0}),i.a.createElement("p",{style:{textAlign:"center"}},"You clicked a bomb!")),i.a.createElement(Ne,null))})),Fe=function(e){Object(C.a)(t,e);var n=Object(B.a)(t);function t(){return Object(T.a)(this,t),n.apply(this,arguments)}return Object(I.a)(t,[{key:"componentDidMount",value:function(){this.props.pageLoadedSetup()}},{key:"render",value:function(){return i.a.createElement("div",{className:"App-Wrapper"},i.a.createElement("div",{className:"App"},i.a.createElement(L,null),i.a.createElement(te,null),i.a.createElement(re,null),i.a.createElement(De,null)))}}]),t}(i.a.Component),Ue=Object(u.b)(null,(function(e){return{pageLoadedSetup:function(){return e({type:"PAGE_LOADED_SETUP",payload:{}})}}}))(Fe),Le=Object(l.createStore)(x,Object(b.composeWithDevTools)(Object(l.applyMiddleware)(f.a))),We=Object(s.b)(Le);o.a.render(i.a.createElement(u.a,{store:Le},i.a.createElement(c.PersistGate,{loading:i.a.createElement("div",null,"Loading..."),persistor:We},i.a.createElement(Ue,null))),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.9b28b41e.chunk.js.map