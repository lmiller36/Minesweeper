(this.webpackJsonpwebsite=this.webpackJsonpwebsite||[]).push([[0],{36:function(e,n,t){e.exports=t(50)},47:function(e,n,t){},50:function(e,n,t){"use strict";t.r(n);var a=t(0),i=t.n(a),r=t(13),o=t.n(r),u=t(17),c=t(25),s=t(5),l=t(6),d=t(26),m=t.n(d),p=t(27),f=t.n(p),g=t(28),b=t(29),v=t(1),h=function(e){return{type:"TOGGLE_GAME_MODE",payload:{now:e}}},E=function(e){return{type:"START_GAME",payload:{difficulty:e}}},y=function(e){return{type:"SWITCH_PAGES",payload:{PAGE:e}}},O={rows:9,cols:9,numBombs:10,key:"EASY"},M={rows:16,cols:16,numBombs:40,key:"MEDIUM"},_={rows:30,cols:16,numBombs:99,key:"HARD"},w={EASY:O,MEDIUM:M,HARD:_},k=["MAIN_MENU","SETUP_NEW_GAME","IN_GAME_FIRST_CLICK","IN_GAME"],A={gameProps:{difficulty:O,isPaused:!1,game:{board:[]},timeElapsed:0,isSet:!1},pages:{}},P={data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A,n=arguments.length>1?arguments[1]:void 0,t=n.type,a=n.payload;switch(t){case"PAGE_LOADED_SETUP":return k.forEach((function(n){e.pages[n]=!1})),e.pages.MAIN_MENU=!0,Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{gameMode:"clicking",isPaused:!1})});case"INITIALIZE_BOARD":var i=a.game;return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{game:i,isSet:!0,update:0,shouldRerender:0,gameMode:"clicking",isPaused:!1})});case"UPDATE_BOARD":return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{shouldRerender:e.gameProps.shouldRerender+1})});case"UPDATE_TIMER":var r=a.timeElapsed;return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{timeElapsed:r})});case"TOGGLE_PAUSE_GAME":return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{isPaused:!e.gameProps.isPaused})});case"REMOVE_CACHED_BOARD":return Object(v.a)(Object(v.a)({},e),{},{gameProps:{isSet:!1,game:{board:[]},isPaused:!1,timeElapsed:0}});case"TOGGLE_GAME_MODE":var o="clicking"===e.gameProps.gameMode?"flagging":"clicking";return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{gameMode:o})});case"START_GAME":var u=a.difficulty;return Object(v.a)(Object(v.a)({},e),{},{gameProps:Object(v.a)(Object(v.a)({},e.gameProps),{},{difficulty:u,isPaused:!1,timeElapsed:0,shouldRerender:0,gameMode:"clicking"})});case"SWITCH_PAGES":var c=a.PAGE;return k.forEach((function(n){e.pages[n]=n===c})),Object(v.a)({},e);default:return e}}},j={key:"root",storage:m.a,stateReconciler:f.a},G=Object(l.combineReducers)(P),x=Object(u.a)(j,G),C=t(14),T=t(15),I=t(35),B=t(34),N=(t(47),t(3)),R=t(4);function S(){var e=Object(N.a)(["\n"]);return S=function(){return e},e}function D(){var e=Object(N.a)(["\n\n"]);return D=function(){return e},e}var F=R.a.div(D()),U=R.a.p(S()),L=function(){return i.a.createElement(F,null,i.a.createElement(U,null,"Lorne's Minesweeper"))},W=function(e){return e.data.gameProps.timeElapsed},H=function(e){return e.data.gameProps.isPaused},z=function(e){return e.data.gameProps.game.board},V=function(e){return e.data.gameProps.shouldRerender},K=function(e){return e.data.gameProps.game},q=function(e){return e.data.gameProps.isSet},J=function(e){return e.data.gameProps.gameMode},Y=function(e){return e.data.gameProps.difficulty},Z=function(e,n){return e.data.pages[n]},Q=function(e){return e.data.gameProps.game.board.length>0};function X(){var e=Object(N.a)(["\n        display:",";\n    "]);return X=function(){return e},e}var $=Object(s.b)((function(e){return{continuePreviousGame:Q(e),inMainMenu:Z(e,"MAIN_MENU"),inSetupMode:Z(e,"SETUP_NEW_GAME")}}),(function(e){return{setupNewGame:function(){return e(y("SETUP_NEW_GAME"))},continueGame:function(){return e(y("IN_GAME"))}}}))((function(e){var n=e.continuePreviousGame,t=e.inSetupMode,a=e.setupNewGame,r=e.inMainMenu,o=e.continueGame,u=R.a.div(X(),t?"none":"inline-grid");return i.a.createElement("div",{style:{display:r?"":"none"}},i.a.createElement(u,null,i.a.createElement("button",{style:{display:"".concat(n?"":"none")},onClick:function(){o()}},"Continue Game "),i.a.createElement("button",{onClick:function(){a()}},"New Game"),i.a.createElement("button",null,"Settings "),i.a.createElement("button",null,"How To Play ")))})),ee=t(33);function ne(){var e=Object(N.a)(["\n        display: ",";\n    "]);return ne=function(){return e},e}var te=Object(s.b)((function(e){return{inSetupMode:Z(e,"SETUP_NEW_GAME")}}),(function(e){return{localRemoveCachedBoard:function(){return e({type:"REMOVE_CACHED_BOARD",payload:{}})},startGame:function(n){return e(E(n))},switchToGame:function(){return e(y("IN_GAME_FIRST_CLICK"))}}}))((function(e){var n=e.localRemoveCachedBoard,t=e.startGame,a=e.inSetupMode,r=e.switchToGame,o=R.a.div(ne(),a?"inline-grid":"none");return i.a.createElement(o,null,Object.keys(w).map((function(e){var n,t=w[e],a="".concat((n=e,"string"!==typeof n?"":n.charAt(0).toUpperCase()+n.slice(1).toLowerCase())," (").concat(t.rows," x ").concat(t.cols,", ").concat(t.numBombs," mines)");return i.a.createElement("div",null,i.a.createElement("input",{type:"radio",id:e,name:"gameDifficulty",value:e}),i.a.createElement("label",{htmlFor:e},a))})),i.a.createElement("button",{onClick:function(){!function(){n();var e,a,i=document.querySelectorAll("input[name='gameDifficulty']"),r=Object(ee.a)(i);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(o.checked){e=o.value;break}}}catch(c){r.e(c)}finally{r.f()}var u=O;e===M.key?u=M:e===_.key&&(u=_),t(u)}(),r()}},"Start Game "))})),ae=t(7),ie=t(8);function re(){var e=Object(N.a)([""]);return re=function(){return e},e}var oe=R.a.div(re()),ue=!1,ce=Object(s.b)((function(e){return{timeElapsed:W(e),isPaused:H(e),inGame:Z(e,"IN_GAME"),inGameFirstClick:Z(e,"IN_GAME_FIRST_CLICK")}}),(function(e){return{updateTimer:function(n){return e(function(e){return{type:"UPDATE_TIMER",payload:{timeElapsed:e}}}(n))}}}))((function(e){var n=e.timeElapsed,t=e.isPaused,a=e.updateTimer,r=e.inGame,o=e.inGameFirstClick;return r&&!t?setTimeout((function(){!r||t||ue||a(n+1)}),1e3):o&&a(0),t?!ue&&t&&(ue=!0):ue=!1,i.a.createElement(oe,null,n)}));function se(){var e=Object(N.a)(["\n    display:flex;\n    margin:15px;\n    justify-content: space-around;\n"]);return se=function(){return e},e}var le=R.a.div(se()),de=Object(s.b)((function(e){return{game:K(e),gameMode:J(e),gameDifficulty:Y(e),remainingBombs:0,isPaused:H(e),inGame:Z(e,"IN_GAME")}}),(function(e){return{mainMenu:function(){return e(y("MAIN_MENU"))},startGame:function(n){return e(E(n))},inGameFirstClick:function(){return e(y("IN_GAME_FIRST_CLICK"))},toggleGameMode:function(){return e(h())},localRemoveCachedBoard:function(){return e({type:"REMOVE_CACHED_BOARD",payload:{}})},toggledPause:function(){return e({type:"TOGGLE_PAUSE_GAME",payload:{}})}}}))((function(e){var n=e.gameMode,t=e.isPaused,a=e.gameDifficulty,r=e.toggleGameMode,o=e.inGameFirstClick,u=e.localRemoveCachedBoard,c=e.startGame,s=e.mainMenu,l=e.remainingBombs,d=e.toggledPause,m=e.inGame;return i.a.createElement(le,null,i.a.createElement(ie.a,{size:"2x",icon:ae.b,onClick:function(){s()}}),i.a.createElement(ce,null),i.a.createElement("div",null,l),i.a.createElement("div",null,i.a.createElement(ie.a,{size:"2x",icon:"flagging"===n?ae.a:ae.c,onClick:function(){r()}})),i.a.createElement(ie.a,{style:{display:"".concat(m?"":"none")},size:"2x",icon:t?ae.e:ae.d,onClick:d}),i.a.createElement(ie.a,{size:"2x",icon:ae.f,onClick:function(){u(),o(),c(a)}}))})),me=["https://upload.wikimedia.org/wikipedia/commons/thumb/8/80/Minesweeper_0.svg/2000px-Minesweeper_0.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/Minesweeper_1.svg/2000px-Minesweeper_1.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Minesweeper_2.svg/2000px-Minesweeper_2.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/0/08/Minesweeper_3.svg/2000px-Minesweeper_3.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/4/4f/Minesweeper_4.svg/2000px-Minesweeper_4.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Minesweeper_5.svg/2000px-Minesweeper_5.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/c/cc/Minesweeper_6.svg/2000px-Minesweeper_6.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/5/56/Minesweeper_7.svg/2000px-Minesweeper_7.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Minesweeper_8.svg/2000px-Minesweeper_8.svg.png"];function pe(){var e=Object(N.a)(["\ncontent: url(",");\n    width: 50px;\n    height: 50px;\n"]);return pe=function(){return e},e}var fe=function(){this.url="https://apprecs.org/ios/images/app-icons/256/e7/451931111.jpg"},ge=function(e){this.url=me[e]},be=function(){this.url="https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Minesweeper_flag.svg/2000px-Minesweeper_flag.svg.png"},ve=function(){this.url="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c7/Minesweeper_unopened_square.svg/1024px-Minesweeper_unopened_square.svg.png"};var he=new function(){this.createImage=function(e){return(e.isOpened&&"bomb"===e.type?new fe:e.isOpened?new ge(e.numBombs):e.isFlagged?new be:new ve).url}},Ee=R.a.div(pe(),(function(e){return he.createImage(e.tile)}));function ye(){var e=Object(N.a)(["\n    position:relative;\n    width: 50px;\n    height: 50px;\n"]);return ye=function(){return e},e}var Oe=R.a.div(ye()),Me=function(e){var n=e.tile,t=e.gameMode,a=e.click;return i.a.createElement(Oe,{onClick:function(){a(n)}},i.a.createElement(Ee,{style:{position:"absolute"},tile:n}),i.a.createElement(ie.a,{size:"2x",style:{display:"".concat("flagging"!==t||n.isOpened||n.isFlagged?"none":""),zIndex:"20",position:"absolute",left:"10",top:"10",opacity:".3"},icon:ae.a}))},_e=t(20),we={type:"bomb"},ke={type:"safe"};function Ae(e){return"bomb"===e.type}function Pe(e,n,t){for(var a=[],i=0;i<e;i++)a.push(Object(v.a)(Object(v.a)({},t),{},{index:i}));return a}var je=function(){function e(n,t){Object(C.a)(this,e);var a=n.rows,i=n.cols,r=n.numBombs;this.rows=a,this.cols=i,this.bombs=r,this.nonBombs=a*i-r,this.remaining=a*i-r,this.opened=new Set,0===this.bombs?this.board=Pe(a*i):(this.board=this.createBoard(n,t),this.clickTile(this.board[t]))}return Object(T.a)(e,[{key:"createBoard",value:function(e,n){var t,a=this,i=e.rows,r=e.cols,o=e.numBombs,u=this.indexToPos(n,r),c=i*r,s=function(e){for(var n=[],t=0;t<e;t++)n.push(we);return n}(o),l=9;this.isCorner(u,i,r)?l=4:this.isOnAnEdge(u,i,r)&&(l=6);var d=Pe(c-l-o,ke),m=function(e){for(var n=e.length-1;n>0;n--){var t=Math.floor(Math.random()*(n+1)),a=[e[t],e[n]];e[n]=a[0],e[t]=a[1]}return e}(s.concat(d)),p=Object(_e.a)(Array(i)).map((function(){return Array(r).fill(0)}));this.iterateOverNeighbors(u,(function(e){p[e.y][e.x]=ke}));var f=0;return this.iterateOverRowsCols((function(e,n){p[e][n]||(p[e][n]=m[f],f++),p[e][n]=Object(v.a)(Object(v.a)({},p[e][n]),{},{index:a.posToArrIndex({x:n,y:e},r),numBombs:0})})),this.calculateBombNumberForEachTile(p,i,r),(t=[]).concat.apply(t,Object(_e.a)(p))}},{key:"iterateOverNeighbors",value:function(e,n){for(var t=-1;t<=1;t++)for(var a=-1;a<=1;a++){var i={x:e.x+t,y:e.y+a};i.x<0||i.x>=this.cols||(i.y<0||i.y>=this.rows||n(i))}}},{key:"iterateOverRowsCols",value:function(e){for(var n=0;n<this.rows;n++)for(var t=0;t<this.cols;t++)e(n,t)}},{key:"calculateBombNumberForEachTile",value:function(e,n,t){var a=this;this.iterateOverRowsCols((function(n,t){if(Ae(e[n][t])){var i={x:t,y:n};a.iterateOverNeighbors(i,(function(n){e[n.y][n.x].numBombs+=1}))}}))}},{key:"posToArrIndex",value:function(e,n){return e.y*n+e.x}},{key:"isCorner",value:function(e,n,t){return 2===this.numEdgesOfPos(e,n,t)}},{key:"numEdgesOfPos",value:function(e,n,t){var a=0===e.y,i=e.y===t-1,r=0===e.x,o=e.x===n-1,u=0;return(a||i)&&u++,(r||o)&&u++,u}},{key:"isOnAnEdge",value:function(e,n,t){return this.numEdgesOfPos(e,n,t)>0}},{key:"indexToPos",value:function(e,n){var t=Math.trunc(e/n);return{x:e-t*n,y:t}}},{key:"clickTile",value:function(e){this.openNonBombNeighbors(e)}},{key:"flagTile",value:function(e){var n=this.board[e.index],t=n.isFlagged;n.isFlagged=!t}},{key:"indexWithinBounds",value:function(e){return e>=0&&e<this.rows*this.cols}},{key:"isFlagged",value:function(e){return this.board[e].isFlagged}},{key:"neighborsWithFlags",value:function(e){var n=this,t=0;return this.iterateOverNeighbors(this.indexToPos(e.index,this.cols),(function(e){var a=n.posToArrIndex(e,n.cols);n.isFlagged(a)&&t++})),t}},{key:"openNeighbors",value:function(e){var n=this,t=this.neighborsWithFlags(e),a=this.indexToPos(e.index,this.cols);t===e.numBombs&&this.iterateOverNeighbors(a,(function(e){var t=n.posToArrIndex(e,n.cols);if(n.indexWithinBounds(t)){var a=n.board[t];if(n.isFlagged(t))return;if(a.isOpened)return;n.clickTile(a)}}))}},{key:"decrementUsed",value:function(e){this.opened.has(e)||this.remaining--,this.opened.add(e),this.opened.size===this.nonBombs&&alert("WIN!")}},{key:"openNonBombNeighbors",value:function(e){var n=this;if("bomb"!==e.type){var t=this.indexToPos(e.index,this.cols);e.isOpened||(this.board[e.index].isOpened=!0,this.decrementUsed(e.index),e.numBombs&&e.numBombs>0||this.iterateOverNeighbors(t,(function(e){var t=n.board[n.posToArrIndex(e,n.cols)];Ae(t)||n.openNonBombNeighbors(t)})))}else alert("loss!")}}]),e}();function Ge(){var e=Object(N.a)(["\n        display: inline-grid;\n        visibility: ",";\n        grid-template-columns: repeat(",",1fr);\n    "]);return Ge=function(){return e},e}var xe=null,Ce=!0,Te=Object(s.b)((function(e){return{board:z(e),isSet:q(e),game:K(e),rerender:V(e),gameMode:J(e),gameDifficulty:Y(e),isPaused:H(e)}}),(function(e){return{performInitialSetup:function(n){return e({type:"INITIALIZE_BOARD",payload:{game:n}})},firstClick:function(){return e(y("IN_GAME"))},updateBoard:function(){return e({type:"UPDATE_BOARD",payload:{}})},removeCachedBoard:function(){return e({type:"REMOVE_CACHED_BOARD",payload:{}})},toggleGameMode:function(){return e(h())},localRemoveCachedBoard:function(){return e({type:"REMOVE_CACHED_BOARD",payload:{}})},setDifficulty:function(n){return e(E(n))}}}))((function(e){var n=e.board,t=e.game,a=e.isSet,r=e.gameMode,o=e.gameDifficulty,u=e.isPaused,c=e.performInitialSetup,s=e.updateBoard,l=e.firstClick,d=e.toggleGameMode,m=R.a.div(Ge(),u?"hidden":"",o?o.cols:0);xe=new je(Object(v.a)(Object(v.a)({},o),{},{numBombs:0}),null),Ce&&a&&(window.addEventListener("keydown",(function(e){"F"!==e.key&&"f"!==e.key||d()}),!1),Ce=!1);var p=a?n:xe.board;return i.a.createElement(m,null,p.map((function(e){return i.a.createElement(Me,{key:e.index,tile:e,gameMode:r,click:function(e){a?function(e){return!(!e||!e.isOpened)}(e)?function(e){t.openNeighbors(e),s()}(e):"flagging"!==r?e.isFlagged||("bomb"!==e.type?function(e){t.clickTile(e),s()}(e):alert("LOSS!")):function(e){t.flagTile(e),s()}(e):function(e){var n=new je(o,e.index);c(n),l()}(e)}})})))})),Ie=Object(s.b)((function(e){return{inGame:Z(e,"IN_GAME")||Z(e,"IN_GAME_FIRST_CLICK")}}),(function(e){return{toggleGameMode:function(){return e(h())},localRemoveCachedBoard:function(){return e({type:"REMOVE_CACHED_BOARD",payload:{}})},setDifficulty:function(n){return e(E(n))}}}))((function(e){e.localRemoveCachedBoard,e.setDifficulty,e.toggleGameMode;var n=e.inGame;return i.a.createElement("div",{style:{display:n?"":"none"}},i.a.createElement(de,null),i.a.createElement(Te,null))})),Be=function(e){Object(I.a)(t,e);var n=Object(B.a)(t);function t(){return Object(C.a)(this,t),n.apply(this,arguments)}return Object(T.a)(t,[{key:"componentDidMount",value:function(){this.props.pageLoadedSetup()}},{key:"render",value:function(){return i.a.createElement("div",{className:"App-Wrapper"},i.a.createElement("div",{className:"App"},i.a.createElement(L,null),i.a.createElement($,null),i.a.createElement(te,null),i.a.createElement(Ie,null)))}}]),t}(i.a.Component),Ne=Object(s.b)(null,(function(e){return{pageLoadedSetup:function(){return e({type:"PAGE_LOADED_SETUP",payload:{}})}}}))(Be),Re=Object(l.createStore)(x,Object(b.composeWithDevTools)(Object(l.applyMiddleware)(g.a))),Se=Object(u.b)(Re);o.a.render(i.a.createElement(s.a,{store:Re},i.a.createElement(c.PersistGate,{loading:i.a.createElement("div",null,"Loading..."),persistor:Se},i.a.createElement(Ne,null))),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.bfd5163d.chunk.js.map