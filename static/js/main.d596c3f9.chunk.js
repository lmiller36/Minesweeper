(this.webpackJsonpwebsite=this.webpackJsonpwebsite||[]).push([[0],{24:function(e,n,t){},37:function(e,n,t){e.exports=t(51)},50:function(e,n,t){},51:function(e,n,t){"use strict";t.r(n);var a=t(0),i=t.n(a),r=t(13),o=t.n(r),u=t(18),c=t(27),s=t(5),l=t(6),d=t(28),m=t.n(d),p=t(29),f=t.n(p),g=t(30),b=t(31),v=t(1),h=function(e){return{type:"TOGGLE_GAME_MODE",payload:{now:e}}},y=function(e){return{type:"SET_GAME_DIFFICULTY",payload:{difficulty:e}}},O={rows:9,cols:9,numBombs:10},E={rows:16,cols:16,numBombs:40},w={rows:30,cols:16,numBombs:99},M={EASY:O,MEDIUM:E,HARD:w},k={difficulty:O,game:{board:[],isSet:!1}},j={data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,n=arguments.length>1?arguments[1]:void 0,t=n.type,a=n.payload;switch(console.log(t),t){case"PAGE_LOADED_SETUP":return Object(v.a)(Object(v.a)({},e),{},{inSetupMode:!1,inMainMenu:!0,inGame:!1});case"INITIALIZE_BOARD":var i=a.game,r=i.board;return Object(v.a)(Object(v.a)({},e),{},{game:i,board:r,isSet:!0,update:0,shouldRerender:0,now:null,startTime:null,gameMode:"clicking",timerInterval:null});case"UPDATE_BOARD":var o=a.game;return Object(v.a)(Object(v.a)({},e),{},{shouldRerender:e.shouldRerender+1,board:o});case"INITILIZE_TIMER":var u=a.startTime,c=a.timerInterval;return Object(v.a)(Object(v.a)({},e),{},{now:u,startTime:u,timerInterval:c});case"UPDATE_TIMER":var s=a.now;return Object(v.a)(Object(v.a)({},e),{},{now:s});case"REMOVE_CACHED_BOARD":return Object(v.a)(Object(v.a)({},e),{},{timerInterval:null,now:null,isSet:!1,startTime:null,game:{board:[]},difficulty:O});case"TOGGLE_GAME_MODE":var l="clicking"===e.gameMode?"flagging":"clicking";return Object(v.a)(Object(v.a)({},e),{},{gameMode:l});case"SET_GAME_DIFFICULTY":var d=a.difficulty;return Object(v.a)(Object(v.a)({},e),{},{difficulty:d,inSetupMode:!1,inMainMenu:!1,inGame:!0});case"SETUP_NEW_GAME":return Object(v.a)(Object(v.a)({},e),{},{inSetupMode:!0,inMainMenu:!1,inGame:!1});case"CONTINUE_GAME":return Object(v.a)(Object(v.a)({},e),{},{inSetupMode:!1,inMainMenu:!1,inGame:!0});default:return e}}},_={key:"root",storage:m.a,stateReconciler:f.a},x=Object(l.combineReducers)(j),T=Object(u.a)(_,x),A=t(14),I=t(15),B=t(36),D=t(35),G=(t(24),t(16)),C=t(3),S=t(4),R=t(7),N=t(10),P=function(e){return e.data.board},F=function(e){return e.data.shouldRerender},L=function(e){return e.data.game},U=function(e){return e.data.isSet},W=function(e){return e.data.startTime},H=function(e){return e.data.now},z=function(e){return e.data.gameMode},V=function(e){return e.data.difficulty},q=function(e){return e.data.inSetupMode},Z=function(e){return e.data.inGame},Y=function(e){return e.data.inMainMenu};function J(){var e=Object(C.a)([""]);return J=function(){return e},e}var K=S.a.div(J()),Q=Object(s.b)((function(e){return{startTime:W(e),now:H(e)}}))((function(e){var n=e.startTime,t=e.now-n,a=0;return isNaN(a)||(a=Math.round(t/1e3)),i.a.createElement(K,null,a)}));function X(){var e=Object(C.a)(["\n    display:flex;\n    margin:15px;\n    justify-content: space-around;\n"]);return X=function(){return e},e}function $(){var e=Object(C.a)(["\n"]);return $=function(){return e},e}function ee(){var e=Object(C.a)(["\n"]);return ee=function(){return e},e}var ne=S.a.div(ee()),te=S.a.div($()),ae=S.a.div(X()),ie=Object(s.b)((function(e){return{board:P(e),game:L(e),gameMode:z(e)}}))((function(e){return i.a.createElement(ae,null,i.a.createElement(N.a,{size:"2x",icon:R.b,onClick:function(){}}),i.a.createElement(Q,null),i.a.createElement(te,null,e.game.remaining),i.a.createElement(ne,null,i.a.createElement(N.a,{size:"2x",icon:"flagging"===e.gameMode?R.a:R.c,onClick:function(){e.toggleGameMode()}})),i.a.createElement(N.a,{size:"2x",icon:R.d,onClick:function(){console.log(e),e.localRemoveCachedBoard();var n,t,a=document.querySelectorAll("input[name='gameDifficulty']"),i=Object(G.a)(a);try{for(i.s();!(t=i.n()).done;){var r=t.value;if(r.checked){n=r.value;break}}}catch(u){i.e(u)}finally{i.f()}var o=O;"medium"===n?o=E:"hard"===n&&(o=w),e.setGameDifficulty(o)}}))})),re=["https://upload.wikimedia.org/wikipedia/commons/thumb/8/80/Minesweeper_0.svg/2000px-Minesweeper_0.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/c/ca/Minesweeper_1.svg/2000px-Minesweeper_1.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/4/44/Minesweeper_2.svg/2000px-Minesweeper_2.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/0/08/Minesweeper_3.svg/2000px-Minesweeper_3.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/4/4f/Minesweeper_4.svg/2000px-Minesweeper_4.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/4/46/Minesweeper_5.svg/2000px-Minesweeper_5.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/c/cc/Minesweeper_6.svg/2000px-Minesweeper_6.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/5/56/Minesweeper_7.svg/2000px-Minesweeper_7.svg.png","https://upload.wikimedia.org/wikipedia/commons/thumb/0/0d/Minesweeper_8.svg/2000px-Minesweeper_8.svg.png"];function oe(){var e=Object(C.a)(["\ncontent: url(",");\n    width: 50px;\n    height: 50px;\n"]);return oe=function(){return e},e}var ue=function(){this.url="https://apprecs.org/ios/images/app-icons/256/e7/451931111.jpg"},ce=function(e){this.url=re[e]},se=function(){this.url="https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Minesweeper_flag.svg/2000px-Minesweeper_flag.svg.png"},le=function(){this.url="https://upload.wikimedia.org/wikipedia/commons/thumb/c/c7/Minesweeper_unopened_square.svg/1024px-Minesweeper_unopened_square.svg.png"};var de=new function(){this.createImage=function(e){return(e.isOpened&&"bomb"===e.type?new ue:e.isOpened?new ce(e.numBombs):e.isFlagged?new se:new le).url}},me=S.a.div(oe(),(function(e){return de.createImage(e.tile)}));function pe(){var e=Object(C.a)(["\n    position:relative;\n    width: 50px;\n    height: 50px;\n"]);return pe=function(){return e},e}var fe=S.a.div(pe()),ge=function(e){var n=e.tile,t=e.gameMode,a=e.click;return i.a.createElement(fe,{onClick:function(){a(n)}},i.a.createElement(me,{style:{position:"absolute"},tile:n}),i.a.createElement(N.a,{size:"2x",style:{display:"".concat("flagging"!==t||n.isOpened||n.isFlagged?"none":""),zIndex:"20",position:"absolute",left:"10",top:"10",opacity:".6"},icon:R.a}))},be=t(21);var ve={type:"bomb"},he={type:"safe"};function ye(e){return"bomb"===e.type}function Oe(e,n,t){for(var a=[],i=0;i<e;i++)a.push(Object(v.a)(Object(v.a)({},t),{},{index:i}));return a}var Ee=function(){function e(n,t){Object(A.a)(this,e);var a=n.rows,i=n.cols,r=n.numBombs;this.rows=a,this.cols=i,this.bombs=r,this.nonBombs=a*i-r,this.remaining=a*i-r,this.opened=new Set,0===this.bombs?this.board=Oe(a*i):(this.board=this.createBoard(n,t),this.clickTile(this.board[t]))}return Object(I.a)(e,[{key:"createBoard",value:function(e,n){var t,a=this,i=e.rows,r=e.cols,o=e.numBombs,u=this.indexToPos(n,r),c=i*r,s=function(e){for(var n=[],t=0;t<e;t++)n.push(ve);return n}(o),l=9;this.isCorner(u,i,r)?l=4:this.isOnAnEdge(u,i,r)&&(l=6);var d=Oe(c-l-o,he),m=function(e){for(var n=e.length-1;n>0;n--){var t=Math.floor(Math.random()*(n+1)),a=[e[t],e[n]];e[n]=a[0],e[t]=a[1]}return e}(s.concat(d)),p=Object(be.a)(Array(i)).map((function(){return Array(r).fill(0)}));this.iterateOverNeighbors(u,(function(e){p[e.y][e.x]=he}));var f=0;return this.iterateOverRowsCols((function(e,n){p[e][n]||(p[e][n]=m[f],f++),p[e][n]=Object(v.a)(Object(v.a)({},p[e][n]),{},{index:a.posToArrIndex({x:n,y:e},r),numBombs:0})})),this.calculateBombNumberForEachTile(p,i,r),(t=[]).concat.apply(t,Object(be.a)(p))}},{key:"iterateOverNeighbors",value:function(e,n){for(var t=-1;t<=1;t++)for(var a=-1;a<=1;a++){var i={x:e.x+t,y:e.y+a};i.x<0||i.x>=this.cols||(i.y<0||i.y>=this.rows||n(i))}}},{key:"iterateOverRowsCols",value:function(e){for(var n=0;n<this.rows;n++)for(var t=0;t<this.cols;t++)e(n,t)}},{key:"calculateBombNumberForEachTile",value:function(e,n,t){var a=this;this.iterateOverRowsCols((function(n,t){if(ye(e[n][t])){var i={x:t,y:n};a.iterateOverNeighbors(i,(function(n){e[n.y][n.x].numBombs+=1}))}}))}},{key:"posToArrIndex",value:function(e,n){return e.y*n+e.x}},{key:"isCorner",value:function(e,n,t){return 2===this.numEdgesOfPos(e,n,t)}},{key:"numEdgesOfPos",value:function(e,n,t){var a=0===e.y,i=e.y===t-1,r=0===e.x,o=e.x===n-1,u=0;return(a||i)&&u++,(r||o)&&u++,u}},{key:"isOnAnEdge",value:function(e,n,t){return this.numEdgesOfPos(e,n,t)>0}},{key:"indexToPos",value:function(e,n){var t=Math.trunc(e/n);return{x:e-t*n,y:t}}},{key:"clickTile",value:function(e){this.openNonBombNeighbors(e)}},{key:"flagTile",value:function(e){var n=this.board[e.index],t=n.isFlagged;n.isFlagged=!t}},{key:"indexWithinBounds",value:function(e){return e>=0&&e<this.rows*this.cols}},{key:"isFlagged",value:function(e){return this.board[e].isFlagged}},{key:"neighborsWithFlags",value:function(e){var n=this,t=0;return this.iterateOverNeighbors(this.indexToPos(e.index,this.cols),(function(e){var a=n.posToArrIndex(e,n.cols);n.isFlagged(a)&&t++})),t}},{key:"openNeighbors",value:function(e){var n=this,t=this.neighborsWithFlags(e),a=this.indexToPos(e.index,this.cols);t===e.numBombs&&this.iterateOverNeighbors(a,(function(e){var t=n.posToArrIndex(e,n.cols);if(n.indexWithinBounds(t)){var a=n.board[t];if(n.isFlagged(t))return;if(a.isOpened)return;n.clickTile(a)}}))}},{key:"decrementUsed",value:function(e){this.opened.has(e)||this.remaining--,this.opened.add(e),this.opened.size===this.nonBombs&&alert("WIN!")}},{key:"openNonBombNeighbors",value:function(e){var n=this;if("bomb"!==e.type){var t=this.indexToPos(e.index,this.cols);e.isOpened||(this.board[e.index].isOpened=!0,this.decrementUsed(e.index),e.numBombs&&e.numBombs>0||this.iterateOverNeighbors(t,(function(e){var t=n.board[n.posToArrIndex(e,n.cols)];ye(t)||n.openNonBombNeighbors(t)})))}else alert("loss!")}}]),e}();function we(){var e=Object(C.a)(["\n        display: inline-grid;\n        grid-template-columns: repeat(",",1fr);\n    "]);return we=function(){return e},e}var Me=!1,ke=null,je=!0,_e=Object(s.b)((function(e){return{board:P(e),isSet:U(e),game:L(e),rerender:F(e),gameMode:z(e),gameDifficulty:V(e)}}),(function(e){return{performInitialSetup:function(n){return e({type:"INITIALIZE_BOARD",payload:{game:n}})},updateBoard:function(n){return e({type:"UPDATE_BOARD",payload:{game:n}})},removeCachedBoard:function(){return e({type:"REMOVE_CACHED_BOARD",payload:{}})},setStartTime:function(n,t){return e(function(e){return{type:"INITILIZE_TIMER",payload:{startTime:e}}}(n))},updateTimer:function(n){return e(function(e){return{type:"UPDATE_TIMER",payload:{now:e}}}(n))},toggleGameMode:function(){return e(h())},localRemoveCachedBoard:function(){return e({type:"REMOVE_CACHED_BOARD",payload:{}})},setDifficulty:function(n){return e(y(n))}}}))((function(e){var n=e.board,t=e.game,a=e.isSet,r=e.gameMode,o=e.gameDifficulty,u=e.performInitialSetup,c=e.updateBoard,s=e.setStartTime,l=e.updateTimer,d=e.toggleGameMode,m=S.a.div(we(),o.cols);ke=new Ee(Object(v.a)(Object(v.a)({},o),{},{numBombs:0}),null),je&&a&&(window.addEventListener("keydown",(function(e){"F"!==e.key&&"f"!==e.key||d()}),!1),je=!1);var p=a?n:ke.board;return i.a.createElement("div",null,i.a.createElement(m,null,p.map((function(e){return i.a.createElement(ge,{key:e.index,tile:e,gameMode:r,click:function(e){a?function(e){return!(!e||!e.isOpened)}(e)?function(e){t.openNeighbors(e),c(t.board)}(e):"flagging"!==r?e.isFlagged||("bomb"!==e.type?function(e){t.clickTile(e),c(t.board)}(e):console.log("LOSS!")):function(e){t.flagTile(e),c(t.board)}(e):function(e){Me=!1;var n=new Ee(o,e.index);u(n);var t=setInterval((function(){l(new Date),Me&&clearInterval(t)}),1e3);s(new Date,t)}(e)}})}))))})),xe=Object(s.b)((function(e){return{inGame:Z(e)}}),(function(e){return{toggleGameMode:function(){return e(h())},localRemoveCachedBoard:function(){return e({type:"REMOVE_CACHED_BOARD",payload:{}})},setDifficulty:function(n){return e(y(n))}}}))((function(e){var n=e.localRemoveCachedBoard,t=e.setDifficulty,a=e.toggleGameMode,r=e.inGame;return i.a.createElement("div",{style:{display:r?"":"none"}},i.a.createElement(ie,{toggleGameMode:a,localRemoveCachedBoard:n,setGameDifficulty:t}),i.a.createElement(_e,null))}));t(50);function Te(){var e=Object(C.a)(["\n        display:",";\n    "]);return Te=function(){return e},e}var Ae=Object(s.b)((function(e){return{game:L(e),inMainMenu:Y(e),inSetupMode:q(e)}}),(function(e){return{setupNewGame:function(){return e({type:"SETUP_NEW_GAME",payload:{}})},continueGame:function(){return e({type:"CONTINUE_GAME",payload:{}})}}}))((function(e){var n=e.game,t=e.inSetupMode,a=e.setupNewGame,r=e.inMainMenu,o=e.continueGame,u=S.a.div(Te(),t?"none":"inline-grid"),c=0!==n.board.length;return i.a.createElement("div",{style:{display:r?"":"none"}},i.a.createElement(u,null,i.a.createElement("button",{style:{display:"".concat(c?"":"none")},onClick:function(){o()}},"Continue Game "),i.a.createElement("button",{onClick:function(){a()}},"New Game"),i.a.createElement("button",null,"Settings "),i.a.createElement("button",null,"How To Play ")))}));function Ie(){var e=Object(C.a)(["\n"]);return Ie=function(){return e},e}function Be(){var e=Object(C.a)(["\n\n"]);return Be=function(){return e},e}var De=S.a.div(Be()),Ge=S.a.p(Ie()),Ce=function(){return i.a.createElement(De,null,i.a.createElement(Ge,null,"Lorne's Minesweeper"))};function Se(){var e=Object(C.a)(["\n        display: ",";\n    "]);return Se=function(){return e},e}var Re=Object(s.b)((function(e){return{inSetupMode:q(e)}}),(function(e){return{localRemoveCachedBoard:function(){return e({type:"REMOVE_CACHED_BOARD",payload:{}})},setGameDifficulty:function(n){return e(y(n))}}}))((function(e){var n=e.localRemoveCachedBoard,t=e.setGameDifficulty,a=e.inSetupMode;console.log(a),console.log(a?"inline-grid":"none");var r=S.a.div(Se(),a?"inline-grid":"none");return i.a.createElement(r,null,Object.keys(M).map((function(e){var n,t=M[e],a="".concat((n=e,"string"!==typeof n?"":n.charAt(0).toUpperCase()+n.slice(1).toLowerCase())," (").concat(t.rows," x ").concat(t.cols,", ").concat(t.numBombs," mines)");return i.a.createElement("div",null,i.a.createElement("input",{type:"radio",id:{key:e},name:"gameDifficulty",value:{key:e}}),i.a.createElement("label",{htmlFor:{key:e}},a))})),i.a.createElement("button",{onClick:function(){n();var e,a,i=document.querySelectorAll("input[name='gameDifficulty']"),r=Object(G.a)(i);try{for(r.s();!(a=r.n()).done;){var o=a.value;if(o.checked){e=o.value;break}}}catch(c){r.e(c)}finally{r.f()}var u=O;"medium"===e?u=E:"hard"===e&&(u=w),t(u)}},"Start Game "))})),Ne=function(e){Object(B.a)(t,e);var n=Object(D.a)(t);function t(){return Object(A.a)(this,t),n.apply(this,arguments)}return Object(I.a)(t,[{key:"componentDidMount",value:function(){this.props.pageLoadedSetup()}},{key:"render",value:function(){return i.a.createElement("div",{className:"App-Wrapper"},i.a.createElement("div",{className:"App"},i.a.createElement(Ce,null),i.a.createElement(Ae,null),i.a.createElement(Re,null),i.a.createElement(xe,null)))}}]),t}(i.a.Component),Pe=Object(s.b)((function(e){return{inMainMenu:Y(e)}}),(function(e){return{pageLoadedSetup:function(){return e({type:"PAGE_LOADED_SETUP",payload:{}})}}}))(Ne),Fe=Object(l.createStore)(T,Object(b.composeWithDevTools)(Object(l.applyMiddleware)(g.a))),Le=Object(u.b)(Fe);o.a.render(i.a.createElement(s.a,{store:Fe},i.a.createElement(c.PersistGate,{loading:i.a.createElement("div",null,"Loading..."),persistor:Le},i.a.createElement(Pe,null))),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.d596c3f9.chunk.js.map